<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Posts on ä½•æ—¶</title>
    <link>https://ZmN5.github.io/post/</link>
    <description>Recent content in Posts on ä½•æ—¶</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>en</language>
    <lastBuildDate>Sat, 06 Feb 2021 15:47:35 +0800</lastBuildDate>
    
	<atom:link href="https://ZmN5.github.io/post/index.xml" rel="self" type="application/rss+xml" />
    
    
    <item>
      <title>2020å¹´ç»ˆæ€»ç»“</title>
      <link>https://ZmN5.github.io/post/2020-summary/</link>
      <pubDate>Sat, 06 Feb 2021 15:47:35 +0800</pubDate>
      
      <guid>https://ZmN5.github.io/post/2020-summary/</guid>
      <description>æ¯«æ— ç–‘é—®2020æ˜¯è§è¯å†å²çš„ä¸€å¹´ã€‚æ€ä¹ˆè¯´å‘¢ï¼Œç”Ÿæ´»åœ¨è‹±é›„è¾ˆå‡ºçš„å¹´ä»£æ˜¯ä¸å¹¸çš„ï¼Œç”Ÿæ´»åœ¨å¯ä»¥è§è¯å†å²çš„å¹´ä»£ä¹Ÿä¸€æ ·å§ã€‚ ç”Ÿæ´» åä¸€ä¹‹å‰è·Ÿå¤æŸäººå›å®¶äº†ï¼Œè™½ç„¶</description>
    </item>
    
    <item>
      <title>å‡è‚¥</title>
      <link>https://ZmN5.github.io/post/things-about-lose-weight/</link>
      <pubDate>Fri, 23 Oct 2020 18:12:42 +0800</pubDate>
      
      <guid>https://ZmN5.github.io/post/things-about-lose-weight/</guid>
      <description>&lt;p&gt;æˆ‘åˆå¼€å§‹å‡è‚¥äº†ï¼Œå·²ç»æ•°ä¸æ¸…æ˜¯ç¬¬å‡ æ¬¡äº†ã€‚è¿™æ¬¡ç›®æ ‡140æ–¤ï¼Œä»ç„¶ç›¸ä¿¡è¿™æ¬¡ç›®æ ‡è‚¯å®šå¯ä»¥è¾¾æˆã€‚&lt;/p&gt;
&lt;p&gt;å¤§è‡´æ–¹æ¡ˆæ˜¯ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;æ—©ä¸Šåƒç‡•éº¦ã€ç‰›å¥¶ã€æˆ–è€…å…¨éº¦é¢åŒ…çš„ç»„åˆ&lt;/li&gt;
&lt;li&gt;ä¸­åˆæ™šä¸Šåƒè‰&lt;/li&gt;
&lt;li&gt;æ™šä¸Šä¸‹ç­éª‘è½¦å›å®¶&lt;/li&gt;
&lt;li&gt;æ¯å‘¨æœ«åƒä¸€é¡¿å¥½çš„&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;æ€»ä¹‹åŸåˆ™å°±æ˜¯ï¼Œè¿œç¦»ç¢³æ°´åŒ–åˆç‰©ã€‚&lt;/p&gt;
&lt;p&gt;å›æƒ³ä¸€ä¸‹æ¯•ä¸šä¸‰å¹´åˆ°ç°åœ¨ï¼Œæƒ³è¦çªç ´çš„å‡ ä»¶äº‹æƒ…éƒ½éœ€è¦æå¤§åšæŒæ‰èƒ½åšåˆ°äº†ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;å‡è‚¥ï¼ŒåŸå› å¾ˆæ˜æ˜¾ï¼Œå·²ç»å¼€å§‹å½±å“å¥åº·äº†&lt;/li&gt;
&lt;li&gt;å­¦è‹±è¯­ï¼Œè¿™æ¬¡ç›®æ ‡ä¸»è¦æ˜¯å¬ã€è¯´è¾¾åˆ°ç†Ÿç»ƒå§ï¼Œè¿˜å¥½è¿™æ¬¡æœ‰æˆ‘å¯¹è±¡è¾…å¯¼&lt;/li&gt;
&lt;li&gt;æŠ€æœ¯æ›´è¿›ä¸€æ­¥ï¼Œè¦å­¦çš„ä¸œè¥¿å¤ªå¤šäº†&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;åŠ æ²¹ï¼&lt;/p&gt;</description>
    </item>
    
    <item>
      <title>Python Gil</title>
      <link>https://ZmN5.github.io/post/python-gil/</link>
      <pubDate>Sun, 23 Aug 2020 22:19:58 +0800</pubDate>
      
      <guid>https://ZmN5.github.io/post/python-gil/</guid>
      <description>&lt;h1 id=&#34;ä¸€-ä»€ä¹ˆæ˜¯gil&#34;&gt;ä¸€ã€ ä»€ä¹ˆæ˜¯GILï¼Ÿ&lt;/h1&gt;
&lt;p&gt;GILçš„å…¨ç§°ä¸º&lt;code&gt;Global Interpreter Lock&lt;/code&gt;ï¼Œæ˜¯CPythonä¸­çš„ä¸€ç§é”å®ç°ï¼Œç›®çš„æ˜¯ä¸ºäº†åœ¨åŒä¸€æ—¶é—´ï¼Œåªå…è®¸ä¸€ä¸ªçº¿ç¨‹æ§åˆ¶è§£é‡Šå™¨ã€‚&lt;/p&gt;
&lt;h1 id=&#34;äºŒä¸ºä»€ä¹ˆéœ€è¦gil&#34;&gt;äºŒã€ä¸ºä»€ä¹ˆéœ€è¦GILï¼Ÿ&lt;/h1&gt;
&lt;p&gt;Pythonçš„å†…å­˜ç®¡ç†ç”¨çš„æ˜¯å¼•ç”¨è®¡æ•°ï¼Œä¹Ÿå°±æ˜¯æ¯ä¸ªå¯¹è±¡éƒ½ä¼šæœ‰ä¸€ä¸ªè®¡æ•°å™¨æ¥è·Ÿè¸ªè¢«å¼•ç”¨çš„æ•°é‡ï¼Œå¦‚æœè®¡æ•°å™¨çš„å€¼ä¸º0ï¼Œåˆ™æ­¤å¯¹è±¡å ç”¨çš„å†…å­˜è¢«é‡Šæ”¾ã€‚&lt;/p&gt;
&lt;p&gt;ä¹Ÿå°±æ˜¯è¿™ä¸ªå¼•ç”¨è®¡æ•°çš„å€¼éœ€è¦é¿å…ç«æ€æ¡ä»¶(race condition)ï¼Œä¸èƒ½æœ‰å¤šä¸ªçº¿ç¨‹åŒæ—¶ä¿®æ”¹å¯¹è±¡å¼•ç”¨è®¡æ•°å™¨çš„å€¼ï¼Œå¦åˆ™ä¼šé€ æˆå†…å­˜æ³„æ¼æˆ–è€…å„ç§å¥‡æ€ªçš„bugã€‚&lt;/p&gt;
&lt;p&gt;å¦‚æœç»™æ¯ä¸ªå¯¹è±¡éƒ½åŠ é”çš„è¯ï¼Œå°±å¾ˆå¯èƒ½é€ æˆæ­»é”ï¼ˆåªæœ‰å¤šä¸ªé”çš„æƒ…å†µä¸‹æ‰å¯èƒ½é€ æˆæ­»é”ï¼‰ï¼ŒåŒæ—¶å½±å“å•çº¿ç¨‹çš„æ€§èƒ½ã€‚&lt;/p&gt;
&lt;p&gt;æ‰€ä»¥ä¸ºäº†è§£å†³çº¿ç¨‹å®‰å…¨çš„å†…å­˜ç®¡ç†è¿™ä¸ªé—®é¢˜ï¼ŒGuidoçš„é€‰æ‹©æ˜¯ï¼Œå¼•å…¥ä¸€ä¸ªç²—ç²’åº¦çš„å…¨å±€é”ã€‚&lt;/p&gt;
&lt;p&gt;å…¶ä»–æ²¡æœ‰GILçš„è¯­è¨€(æ¯”å¦‚Java)ï¼Œé€šè¿‡ä¸åŒçš„GCæ–¹å¼ï¼Œæ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œä½†æ˜¯å¾€å¾€åŒæ—¶ä¼šå¼•å…¥å…¶ä»–æŠ€æœ¯æ¥æå‡å•è¿›ç¨‹çš„æ€§èƒ½ï¼Œæ¯”å¦‚JITã€‚&lt;/p&gt;
&lt;h1 id=&#34;ä¸‰gilçš„å½±å“&#34;&gt;ä¸‰ã€GILçš„å½±å“&lt;/h1&gt;
&lt;p&gt;GILçš„å½±å“ä¸»è¦åœ¨å¤šçº¿ç¨‹æƒ…å†µä¸‹ï¼Œè¿™é‡Œé¦–å…ˆè¦æ˜ç¡®å‡ ç‚¹ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;pythonçš„çº¿ç¨‹éƒ½æ˜¯åŸç”Ÿæ“ä½œç³»ç»Ÿçº¿ç¨‹&lt;/li&gt;
&lt;li&gt;æ“ä½œç³»ç»Ÿè´Ÿè´£çº¿ç¨‹çš„è°ƒåº¦&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;è¿™é‡Œä»IO-boundå’ŒCPU-boundä¸¤ç§ä¸åŒçš„çº¿ç¨‹åˆ†å¼€è¯´ã€‚&lt;/p&gt;
&lt;h2 id=&#34;31-åä½œçš„io-boundçº¿ç¨‹&#34;&gt;3.1 åä½œçš„IO-boundçº¿ç¨‹&lt;/h2&gt;
&lt;p&gt;åœ¨ä½¿ç”¨Pythonæ ‡æ³¨åº“çš„æƒ…å†µä¸‹è¿›è¡ŒIOæ“ä½œæ—¶ï¼Œæ¯”å¦‚ç½‘ç»œè¯·æ±‚ã€æ–‡ä»¶è¯»å†™ã€æ•°æ®åº“è¯»å†™ç­‰ï¼Œè§£é‡Šå™¨ä¼šåœ¨IOæ“ä½œä¹‹å‰é‡Šæ”¾GILã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;19
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;20
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-C&#34; data-lang=&#34;C&#34;&gt;&lt;span class=&#34;cm&#34;&gt;/* s.connect((host, port)) method */&lt;/span&gt;
&lt;span class=&#34;k&#34;&gt;static&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;PyObject&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;
&lt;span class=&#34;nf&#34;&gt;sock_connect&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;PySocketSockObject&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;s&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;PyObject&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;addro&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;sock_addr_t&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;addrbuf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
    &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;addrlen&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
    &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;res&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;

    &lt;span class=&#34;cm&#34;&gt;/* convert (host, port) tuple to C address */&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;getsockaddrarg&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;s&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;addro&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;SAS2SA&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;addrbuf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;addrlen&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;

    &lt;span class=&#34;n&#34;&gt;Py_BEGIN_ALLOW_THREADS&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;// é‡Šæ”¾GIL
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;cm&#34;&gt;/* Others thread may run now */&lt;/span&gt;
    &lt;span class=&#34;cm&#34;&gt;/* sleep(timeout) */&lt;/span&gt;
    &lt;span class=&#34;cm&#34;&gt;/* write(fd, buffer, size) */&lt;/span&gt;
    &lt;span class=&#34;cm&#34;&gt;/* recv(sock, buffer, size, flags) */&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;Py_END_ALLOW_THREADS&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;// è·å–GIL
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;
    &lt;span class=&#34;cm&#34;&gt;/* error handling and so on .... */&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;æ€»ç»“æ¥è¯´ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;åœ¨è¿›è¡ŒIOæ—¶å€™é‡Šæ”¾GIL&lt;/li&gt;
&lt;li&gt;å…¶ä»–å¤„äºå¯æ‰§è¡ŒçŠ¶æ€çš„çº¿ç¨‹è·å¾—æ‰§è¡Œæœºä¼š&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;æœ‰ç‚¹åä½œçš„æ„å‘³ï¼Œæ‰€ä»¥åœ¨IOå¯†é›†å‹æ“ä½œä¸­ä½¿ç”¨å¤šçº¿ç¨‹ï¼Œæ€§èƒ½å¹¶ä¸ä¼šå¤ªä½ã€‚&lt;/p&gt;
&lt;h2 id=&#34;32-ç¨‹åºblockæ— æ³•å¤„ç†ç³»ç»Ÿsignal&#34;&gt;3.2 ç¨‹åºblockï¼Œæ— æ³•å¤„ç†ç³»ç»ŸSignal&lt;/h2&gt;
&lt;p&gt;åœ¨Python2é‡Œé¢ï¼Œå¦‚æœä¸€ä¸ªçº¿ç¨‹ä»ä¸è¿›è¡Œä»»åŠ¡IOï¼Œè§£é‡Šå™¨æ¯æ‰§è¡Œ&lt;code&gt;100ticks&lt;/code&gt;(1tickå¯¹åº”è§£é‡Šå™¨ä¸­çš„ä¸€æ¡æŒ‡ä»¤)ä¼šè¿›è¡Œä¸€æ¬¡&lt;code&gt;check&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;p&gt;æ¯æ¬¡æ‰§è¡Œ&lt;code&gt;check&lt;/code&gt;æ—¶å€™ï¼Œä¼šè¿›è¡Œï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;åœ¨ä¸»çº¿ç¨‹ä¸­å¤„ç†å„ç§&lt;code&gt;signal&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;release &amp;amp; reacquire GIL&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;å¯ä»¥çœ‹åˆ°ï¼Œ&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;checkçš„å‘¨æœŸä¸æ˜¯ä»¥æ—¶é—´ä¸ºå•ä½çš„&lt;/li&gt;
&lt;li&gt;åœ¨ä¸€ä¸ªå‘¨æœŸå†…å¯ä»¥é˜»å¡ä»»ä½•äº‹æƒ…ï¼Œæ‰§è¡Œä¸åŒçš„æŒ‡ä»¤è€—æ—¶ç›¸å·®å¾ˆå¤§&lt;/li&gt;
&lt;/ol&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# test.py&lt;/span&gt;
&lt;span class=&#34;k&#34;&gt;def&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;block_everything&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;nums&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;xrange&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1000000000&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt; &lt;span class=&#34;ow&#34;&gt;in&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;nums&lt;/span&gt;

&lt;span class=&#34;n&#34;&gt;block_everything&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;æ‰§è¡Œè¿™ä¸ªè„šæœ¬ï¼Œç„¶å&lt;code&gt;ctrl+c&lt;/code&gt;ï¼Œä¼šå‘ç°å¹¶ä¸èƒ½ä½¿ç¨‹åºç»ˆæ­¢ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span class=&#34;n&#34;&gt;dis&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;dis&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;block_everything&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
      &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;LOAD_GLOBAL&lt;/span&gt;              &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;xrange&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
      &lt;span class=&#34;mi&#34;&gt;3&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;LOAD_CONST&lt;/span&gt;               &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1000000000&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
      &lt;span class=&#34;mi&#34;&gt;6&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;CALL_FUNCTION&lt;/span&gt;            &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;
      &lt;span class=&#34;mi&#34;&gt;9&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;STORE_FAST&lt;/span&gt;               &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;nums&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;

     &lt;span class=&#34;mi&#34;&gt;12&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;LOAD_CONST&lt;/span&gt;               &lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
     &lt;span class=&#34;mi&#34;&gt;15&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;LOAD_FAST&lt;/span&gt;                &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;nums&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
     &lt;span class=&#34;mi&#34;&gt;18&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;COMPARE_OP&lt;/span&gt;               &lt;span class=&#34;mi&#34;&gt;6&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;ow&#34;&gt;in&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
     &lt;span class=&#34;mi&#34;&gt;21&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;POP_TOP&lt;/span&gt;
     &lt;span class=&#34;mi&#34;&gt;22&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;LOAD_CONST&lt;/span&gt;               &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;None&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
     &lt;span class=&#34;mi&#34;&gt;25&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;RETURN_VALUE&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;å…¶ä¸­çš„åŸå› æ˜¯ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;å…¶ä¸­ä¸€æ¡æŒ‡ä»¤ï¼ˆ&lt;code&gt;COMPARE_OP&lt;/code&gt;ï¼‰è€—æ—¶å¤ªä¹…ï¼Œè€Œè§£é‡Šå™¨åœ¨æ‰§è¡Œ100ticksä¹‹åæ‰ä¼šå¤„ç†signals&lt;/li&gt;
&lt;li&gt;ä¸»è¿›ç¨‹è¢«blockï¼Œæ— æ³•å¤„ç†signal&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&#34;33-python2çš„ä¼˜å…ˆçº§å€’ç½®priority-inversion&#34;&gt;3.3 Python2çš„ä¼˜å…ˆçº§å€’ç½®ï¼ˆPriority Inversionï¼‰&lt;/h2&gt;
&lt;p&gt;å…ˆè°ˆè°ˆGILçš„å®ç°ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;GILä¸ä»…ä»…æ˜¯mutex&lt;/li&gt;
&lt;li&gt;å…·ä½“å®ç°ï¼ˆUnixï¼‰è¦ä¹ˆæ˜¯åŒ¿åä¿¡å·é‡ï¼Œè¦ä¹ˆæ˜¯Pthreadsæ¡ä»¶å˜é‡&lt;/li&gt;
&lt;li&gt;é”æœºåˆ¶åŸºäºä¿¡å·signal
&lt;ul&gt;
&lt;li&gt;è·å–GILæ—¶å€™ï¼Œæ£€æŸ¥é”ï¼Œå¦‚æœé”éç©ºé—²ï¼Œä¼‘çœ ç„¶åç­‰å¾…é”&lt;/li&gt;
&lt;li&gt;é‡Šæ”¾GILæ—¶å€™ï¼Œé‡Šæ”¾é”å¹¶ä¸”å‘é€signalç»™å…¶ä»–çº¿ç¨‹&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src=&#34;https://ZmN5.github.io/post/static/python-gil/gil-locking.jpg&#34; alt=&#34;GIL&#34;&gt;&lt;/p&gt;
&lt;p&gt;ç”±äºçº¿ç¨‹çš„è°ƒåº¦éƒ½æ˜¯æ“ä½œç³»ç»Ÿè´Ÿè´£çš„ï¼Œé‚£ä¹ˆå¤šä¸ªçº¿ç¨‹å°±ä¼šè¢«è°ƒåº¦åˆ°å¤šæ ¸ä¸ŠåŒæ—¶æ‰§è¡Œï¼Œå°±ä¼šæœ‰CPU Battleçš„ç°è±¡ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://ZmN5.github.io/post/static/python-gil/CPU-battle.jpg&#34; alt=&#34;CPU_battle&#34;&gt;&lt;/p&gt;
&lt;p&gt;å°±ä¸Šå›¾è¯¦ç»†æ¥è¯´ï¼Œçº¿ç¨‹t2è¢«è°ƒåº¦åˆ°CPUæ ¸ä¸Šå¼€å§‹æ‰§è¡Œæ—¶å€™ï¼Œæ‹¿ä¸åˆ°GILè¢«blockï¼Œt1é‡Šæ”¾GILæ—¶å€™ï¼Œé€šçŸ¥t2æ¥æŠ¢ï¼Œä½†æ˜¯è¿™æ—¶å€™t1ä¼šè¢«ç•™åœ¨åŸå…ˆçš„CPUæ ¸ä¸Šç»§ç»­æ‰§è¡Œï¼ŒGILåˆè¢«t1æŠ¢èµ°äº†ï¼Œt2ç»§ç»­blockã€‚&lt;/p&gt;
&lt;p&gt;t2: â€œæ€ä¹ˆæœ‰ç§è¢«è°ƒæˆçš„æ„Ÿè§‰ã€‚ã€‚ã€‚â€&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://ZmN5.github.io/post/static/python-gil/CPU-battle-summary.jpg&#34; alt=&#34;CPU_battle_summary&#34;&gt;&lt;/p&gt;
&lt;p&gt;ä»ä»£ç å¤§æ¦‚æ˜¯è¿™æ ·ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-c&#34; data-lang=&#34;c&#34;&gt;&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;interpreter_lock&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
  &lt;span class=&#34;cm&#34;&gt;/* Give another thread a chance */&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;PyThreadState_Swap&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Null&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;tstate&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
      &lt;span class=&#34;n&#34;&gt;Py_FatalError&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;sa&#34;&gt;&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;Ceval, tstate mix-up.&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;PyThread_release_lock&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;interpreter_lock&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;

    &lt;span class=&#34;cm&#34;&gt;/* Other thread may run now.*/&lt;/span&gt; 
    &lt;span class=&#34;cm&#34;&gt;/* there is no code here. */&lt;/span&gt;

    &lt;span class=&#34;n&#34;&gt;PyThread_acquire_lock&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;interpreter_lock&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;ä»ä»£ç å¯ä»¥çœ‹å‡ºï¼Œè¿™é‡Œæœ€ä¸»è¦çš„é—®é¢˜æ˜¯ï¼Œä»é‡Šæ”¾GILåˆ°é‡æ–°è·å–GILï¼Œä¸­é—´æ²¡æœ‰å…¶ä»–ä»£ç ï¼Œè¿™ä¸ªè¿‡ç¨‹åªéœ€è¦å‡ çº³ç§’ï¼Œå…¶ä»–çº¿ç¨‹å¾ˆéš¾æŠ¢åˆ°GILã€‚&lt;/p&gt;
&lt;p&gt;è¿™ç‚¹åœ¨å‡ ä¸ªéƒ½æ˜¯CPU-boundçš„çº¿ç¨‹ä¸Šçš„å½±å“å°±æ˜¯ï¼Œå¤šçº¿ç¨‹æ¯”å•çº¿ç¨‹æ‰§è¡Œæ›´æ…¢ã€‚
åœ¨åŒæ—¶æœ‰CPU-boundå’ŒIO-boundçš„çº¿ç¨‹ä¸Šå½±å“å°±æ˜¯ï¼Œä¼˜å…ˆçº§å€’ç½®ï¼ˆPriority Inversionï¼‰ã€‚æœ¬æ¥åº”è¯¥é«˜ä¼˜å…ˆçº§çš„IO-boundçº¿ç¨‹ï¼Œä¼šå¾ˆéš¾æ‹¿åˆ°GILå»æ‰§è¡Œã€‚&lt;/p&gt;
&lt;p&gt;æœ€ä¸»è¦çš„é—®é¢˜æ˜¯ï¼Œè¿™é‡Œæºæ‚äº†ä¸¤ä¸ªç›¸å†²çªçš„ç›®æ ‡ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;å¯¹Pythonè§£é‡Šå™¨æ¥è¯´ï¼Œåªæƒ³åœ¨å•çº¿ç¨‹ä¸Šæ‰§è¡Œï¼Œä½†æ˜¯åŒæ—¶åˆä¸åšä»»ä½•å’Œçº¿ç¨‹è°ƒåº¦ç›¸å…³çš„äº‹æƒ…ã€‚&lt;/li&gt;
&lt;li&gt;å¯¹æ“ä½œç³»ç»Ÿæ¥è¯´ï¼Œçœ‹åˆ°æœ‰å¤šä¸ªçº¿ç¨‹ï¼Œé‚£ä¹ˆå°±è°ƒåº¦åˆ°å¤šä¸ªæ ¸ä¸ŠåŒæ—¶å·¥ä½œå§ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&#34;34-python3çš„gil&#34;&gt;3.4 Python3çš„GIL&lt;/h2&gt;
&lt;p&gt;ä»python3.2å¼€å§‹ï¼Œå¼•å…¥äº†æ–°çš„GILã€‚&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;æ–°çš„GILä»æ—§åŸºäº&lt;code&gt;condition variable&lt;/code&gt;å’Œ&lt;code&gt;signaling&lt;/code&gt;ï¼Œä½†æ˜¯å’Œæ—§çš„å®Œå…¨ä¸åŒï¼Œsignalä¼šæ˜¾è‘—å‡å°‘&lt;/li&gt;
&lt;li&gt;æ–°çš„çº¿ç¨‹åˆ‡æ¢æ˜¯åŸºäºæ—¶é—´çš„ï¼ˆ&lt;code&gt;time-based&lt;/code&gt;ï¼‰, ä¸åƒè¿‡å»ä¸€æ ·ï¼Œæ˜¯åŸºäºticksçš„&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;æ–°GILçš„è®¾è®¡åŸºäºå‡ æ¡åŸåˆ™ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;æ˜¯å¦è¦è¿›è¡Œçº¿ç¨‹åˆ‡æ¢å–å†³äºä¸€ä¸ªå…¨å±€å˜é‡ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-c&#34; data-lang=&#34;c&#34;&gt;&lt;span class=&#34;k&#34;&gt;static&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;volatile&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;gil_drop_request&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;çº¿ç¨‹å°†ä¸€ç›´è¿è¡Œï¼Œç›´åˆ°å…¨å±€å˜é‡çš„å€¼å˜ä¸º1&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å…¨å±€å˜é‡å˜ä¸º1æ—¶å€™ï¼Œçº¿ç¨‹å¿…é¡»é‡Šæ”¾GIL&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;æ¥çœ‹çœ‹è¿™äº›æ€ä¹ˆå‘ç”Ÿçš„ï¼Ÿ&lt;/p&gt;
&lt;h3 id=&#34;341-å¦‚æœåªæœ‰ä¸€ä¸ªçº¿ç¨‹&#34;&gt;3.4.1 å¦‚æœåªæœ‰ä¸€ä¸ªçº¿ç¨‹&lt;/h3&gt;
&lt;p&gt;é‚£ä¹ˆè¿™ä¸ªçº¿ç¨‹å°†ä¼šä¸€ç›´è¿è¡Œã€‚&lt;/p&gt;
&lt;h3 id=&#34;342-å¦‚æœæœ‰ä¸¤ä¸ªçº¿ç¨‹&#34;&gt;3.4.2 å¦‚æœæœ‰ä¸¤ä¸ªçº¿ç¨‹&lt;/h3&gt;
&lt;p&gt;å‡è®¾æœ‰ä¸¤ä¸ªçº¿ç¨‹t1å’Œt2ï¼Œåˆå§‹çŠ¶æ€t1æ‹¿åˆ°çº¿ç¨‹ã€‚&lt;/p&gt;
&lt;p&gt;é‚£ä¹ˆt2å°†æ‰§è¡Œcv_wait(gil, TIMEOUT)ï¼Œç­‰å¾…GILè¢«é‡Šæ”¾ï¼Œè¿™æ—¶å€™å°†ä¼šæœ‰ä¸¤ç§æƒ…å†µ&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;t1ä¸»åŠ¨é‡Šæ”¾GILï¼ˆsleep/io/ç­‰ï¼‰ï¼Œt1ç»™t2å‘é€signalï¼Œt2å¼€å§‹æ‰§è¡Œ&lt;/li&gt;
&lt;li&gt;t2ç­‰t1æ‰§è¡Œå®Œæ—¶é—´ç‰‡ï¼ŒæŠŠå…¨å±€å˜é‡gil_drop_requestç½®ä¸º1ï¼Œç„¶åç»§ç»­æ‰§è¡Œcv_wait&lt;/li&gt;
&lt;li&gt;t1å°†ä¸å†æ‰§è¡Œï¼Œæ”¾å¼ƒGILï¼Œå¹¶ä¸”å‘é€signalé€šçŸ¥è‡ªå·±å·²ç»æ”¾å¼ƒGIL&lt;/li&gt;
&lt;li&gt;t1å°†å¼€å§‹ç­‰å¾…ä¸€ä¸ª&lt;code&gt;gotgil&lt;/code&gt;çš„signalï¼Œè¡¨æ˜GILå·²ç»è¢«å…¶ä»–çº¿ç¨‹è·å–&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;ï¼ˆé»˜è®¤çš„TIMEOUTæ—¶é—´æ˜¯5msï¼‰&lt;/p&gt;
&lt;h3 id=&#34;343å½±å“&#34;&gt;3.4.3å½±å“&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;æ–°çš„GILå°†å…è®¸çº¿ç¨‹åœ¨å¿½ç•¥å…¶ä»–çº¿ç¨‹ä»¥åŠIOä¼˜å…ˆçº§çš„æƒ…å†µä¸‹æ‰§è¡Œ5ms&lt;/li&gt;
&lt;li&gt;ä¸€ä¸ªCPUå¯†é›†å‹çº¿ç¨‹å°†é˜»å¡IOçº¿ç¨‹è‡³å°‘5ms&lt;/li&gt;
&lt;li&gt;è¿™å°†ä¼šå½±å“å“åº”æ—¶é—´&lt;/li&gt;
&lt;li&gt;é•¿æ—¶é—´æ‰§è¡Œçš„c/c++æ‰©å±•å°†å½±å“çº¿ç¨‹åˆ‡æ¢ï¼Œçº¿ç¨‹åˆ‡æ¢å°†ä¸å†æ˜¯æŠ¢å å¼çš„&lt;/li&gt;
&lt;/ol&gt;
&lt;h1 id=&#34;å››gilä¸æ˜¯ä»€ä¹ˆ&#34;&gt;å››ã€GILä¸æ˜¯ä»€ä¹ˆï¼Ÿ&lt;/h1&gt;
&lt;ol&gt;
&lt;li&gt;åœ¨å¤šçº¿ç¨‹ç¼–ç¨‹ä¸­ï¼Œå³ä¾¿æœ‰äº†GILï¼Œä½ çš„ä»£ç ä»ç„¶ä¸ä¸€å®šæ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œä»ç„¶éœ€è¦å…¶ä»–åŒæ­¥åŸè¯­&lt;/li&gt;
&lt;/ol&gt;
&lt;h1 id=&#34;äº”æ€»ç»“&#34;&gt;äº”ã€æ€»ç»“&lt;/h1&gt;
&lt;p&gt;æ¯«æ— ç–‘é—®ï¼ŒPythonåœ¨æ—¶ä¸‹è¿™ä¹ˆæµè¡Œæ˜¯ç¦»ä¸å¼€GILçš„ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;GILè®©å•çº¿ç¨‹æ‰§è¡Œçš„æ›´å¿«&lt;/li&gt;
&lt;li&gt;GILè®©IO-boundçš„å¤šçº¿ç¨‹æ‰§è¡Œçš„æ›´å¿«&lt;/li&gt;
&lt;li&gt;GILè®©Cæ‰©å±•å®ç°çš„å¤šçº¿ç¨‹ç¼–ç¨‹æ‰§è¡Œçš„æ›´å¿«ğŸ˜‚&lt;/li&gt;
&lt;li&gt;å®ç°åŠä½¿ç”¨Cæ‰©å±•æ›´åŠ å®¹æ˜“&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;pythoné€‰æ‹©äº†ç²—ç²’åº¦çš„GILäº†ä¿è¯å†…å­˜å®‰å…¨ï¼Œå…¶ä»–è¯­è¨€é€‰æ‹©ç»†ç²’åº¦çš„é”å®ç°çœŸæ­£çš„å¤šçº¿ç¨‹ï¼Œåè¿‡æ¥è¯´ï¼ŒPythonä¹Ÿåˆ©ç”¨GILä¹ŸæŠŠGCæ—¶å€™çš„&lt;code&gt;Stop the world&lt;/code&gt;ï¼Œåˆ†è§£æˆä¸ºäº†ä¸€ä¸ªä¸ªæ›´ç»†ç²’åº¦çš„å†…å­˜å›æ”¶ï¼Œå…¶å®æ¢ä¸ªè§’åº¦æ¥è¯´ï¼Œä¹Ÿå°±æ˜¯æ¢æˆäº†ä¸€ä¸ªä¸ªæ›´ç»†ç²’åº¦çš„&lt;code&gt;Stop the world&lt;/code&gt;å§ã€‚&lt;/p&gt;
&lt;p&gt;å‚è€ƒ:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://realpython.com/python-gil/&#34;&gt;What is the Python Global Interpreter Lock (GIL)?&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://www.youtube.com/watch?v=KVKufdTphKs&#34;&gt;Python&amp;rsquo;s Infamous GIL by Larry Hastings&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://www.dabeaz.com/python/GIL.pdf&#34;&gt;Inside the Python GIL&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://www.dabeaz.com/python/NewGIL.pdf&#34;&gt;Inside the New GIL&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</description>
    </item>
    
    <item>
      <title>gunicornä¸­çš„è¿›ç¨‹ç®¡ç†</title>
      <link>https://ZmN5.github.io/post/process-usage-in-gunicorn/</link>
      <pubDate>Sat, 04 Apr 2020 20:13:41 +0800</pubDate>
      
      <guid>https://ZmN5.github.io/post/process-usage-in-gunicorn/</guid>
      <description>gunicornæ˜¯pythonä¸­ä¸€ä¸ªä¸»æµçš„wsgi serverï¼Œæœ¬æ–‡åªä¼šå…³æ³¨å…¶ä¸­å…³äºè¿›ç¨‹ç®¡ç†çš„éƒ¨åˆ†ï¼Œé¡ºä¾¿ä¹Ÿä¼šæ¶‰åŠå…¶ä»–å…³äºè¿›ç¨‹çš„ä¸œè¥¿ã€‚ guni</description>
    </item>
    
    <item>
      <title>è½¯ä»¶éšæƒ³å½•</title>
      <link>https://ZmN5.github.io/post/read-more-joel-on-software/</link>
      <pubDate>Mon, 17 Feb 2020 21:54:25 +0800</pubDate>
      
      <guid>https://ZmN5.github.io/post/read-more-joel-on-software/</guid>
      <description></description>
    </item>
    
    <item>
      <title>2019å¹´ç»ˆæ€»ç»“</title>
      <link>https://ZmN5.github.io/post/2019-summary/</link>
      <pubDate>Mon, 03 Feb 2020 17:28:37 +0800</pubDate>
      
      <guid>https://ZmN5.github.io/post/2019-summary/</guid>
      <description></description>
    </item>
    
    <item>
      <title>ä»ä¸Šå®¶å…¬å¸å­¦åˆ°çš„</title>
      <link>https://ZmN5.github.io/post/learned-from-ein/</link>
      <pubDate>Tue, 23 Jul 2019 21:51:21 +0800</pubDate>
      
      <guid>https://ZmN5.github.io/post/learned-from-ein/</guid>
      <description>ä»çˆ±å› ç¦»å¼€å¿«ä¸€ä¸ªæœˆäº†ï¼Œæ„Ÿè§‰æœ‰äº›ä¸œè¥¿éœ€è¦æ€»ç»“ä¸€ä¸‹äº†ã€‚ åšæŒä¸å†™code smellçš„ä»£ç  ç¥–å¸ˆçˆ·å»ºè®®çš„ä¸€äº›è§„èŒƒï¼Œpep8/gofmt/isortä¹‹ç±»</description>
    </item>
    
    <item>
      <title>åˆå§‹åŒ–å¼€å‘ç¯å¢ƒ</title>
      <link>https://ZmN5.github.io/post/new-env/</link>
      <pubDate>Sun, 30 Jun 2019 17:40:01 +0800</pubDate>
      
      <guid>https://ZmN5.github.io/post/new-env/</guid>
      <description>&lt;p&gt;æœ€è¿‘å…¥èŒæ–°å…¬å¸ï¼Œç”¨è‡ªå·±çš„ç”µè„‘æ²¡æœ‰è¡¥è´´ï¼Œé‚£å½“ç„¶ç”¨å…¬å¸ç”µè„‘å–½ï¼Œæ‰€ä»¥æ‰€æœ‰çš„ç¯å¢ƒéƒ½è¦é‡è£…ã€‚é€šè¿‡è¿™æ¬¡é‡è£…ç¡®è®¤äº†å‡ ä¸ªå¯¹æˆ‘æ¥è¯´ï¼Œæœ¬åœ°å¼€å‘ä¸€å®šä¼šç”¨åˆ°çš„è½¯ä»¶ã€‚&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;brew&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;emmmï¼Œè¿™ä¸ªå°±ä¸è§£é‡Šäº†ï¼Œåœ¨macä¸‹æ—¶å¿…å¤‡çš„&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;git&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;brew install git&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Tmux&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;å®‰è£…ï¼š brew install tmux&lt;/li&gt;
&lt;li&gt;å®‰è£…tpmï¼šhttps://github.com/tmux-plugins/tpm&lt;/li&gt;
&lt;li&gt;é…ç½®å‚è€ƒï¼šhttps://github.com/zmn5/my-config/blob/master/dot.tmux.conf&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Vim8&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;brew reinstall vim &amp;ndash;with-python3 &amp;ndash;with-luajit&lt;/li&gt;
&lt;li&gt;å®‰è£…æ’ä»¶ç®¡ç†å·¥å…·Plug: &lt;a href=&#34;https://github.com/junegunn/vim-plug&#34;&gt;https://github.com/junegunn/vim-plug&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;å®‰è£…&lt;code&gt;universal-tags&lt;/code&gt;:  &lt;a href=&#34;https://github.com/universal-ctags/ctags&#34;&gt;https://github.com/universal-ctags/ctags&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;å®‰è£…æ’ä»¶ï¼š &lt;a href=&#34;https://github.com/zmn5/my-config/blob/master/dot.vimrc&#34;&gt;https://github.com/zmn5/my-config/blob/master/dot.vimrc&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;zsh/oh-my-zsh&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;å®‰è£…&lt;code&gt;zsh&lt;/code&gt;: &lt;a href=&#34;https://github.com/robbyrussell/oh-my-zsh/wiki/Installing-ZSH&#34;&gt;https://github.com/robbyrussell/oh-my-zsh/wiki/Installing-ZSH&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;å®‰è£…&lt;code&gt;oh-my-zsh&lt;/code&gt;: &lt;a href=&#34;https://github.com/robbyrussell/oh-my-zsh&#34;&gt;https://github.com/robbyrussell/oh-my-zsh&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;å®‰è£…åŒ…ç®¡ç†å™¨&lt;code&gt;zplug&lt;/code&gt;ï¼š brew install zplug&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å®‰è£…fdï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;å®‰è£…ï¼š &lt;a href=&#34;https://github.com/sharkdp/fd&#34;&gt;https://github.com/sharkdp/fd&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;fzf&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;å®‰è£…ï¼š brew install fzf&lt;/li&gt;
&lt;li&gt;$(brew &amp;ndash;prefix)/opt/fzf/install&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ag&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;å®‰è£…å‚è€ƒï¼š &lt;a href=&#34;https://github.com/ggreer/the_silver_searcher&#34;&gt;https://github.com/ggreer/the_silver_searcher&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;z jump&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;å®‰è£…å‚è€ƒï¼š &lt;a href=&#34;https://github.com/rupa/z&#34;&gt;https://github.com/rupa/z&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;vscode&lt;/p&gt;
&lt;p&gt;å†™å‰ç«¯ä»£ç æ—¶å€™ï¼Œæ„Ÿè§‰ç”¨vimè¿˜æ˜¯éš¾å—&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;typora&lt;/p&gt;
&lt;p&gt;è¯•è¿‡å¾ˆå¤šä¸ª&lt;code&gt;markdown&lt;/code&gt;ç¼–è¾‘å·¥å…·ï¼Œæ„Ÿè§‰è¿˜æ˜¯è¿™ä¸ªæ¯”è¾ƒå¥½ç”¨&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;</description>
    </item>
    
    <item>
      <title>ä¸€æ¬¡å¤±è´¥çš„k8séƒ¨ç½²ç»å†</title>
      <link>https://ZmN5.github.io/post/failed-k8s-cluster/</link>
      <pubDate>Sat, 30 Mar 2019 23:04:44 +0800</pubDate>
      
      <guid>https://ZmN5.github.io/post/failed-k8s-cluster/</guid>
      <description>è¿™ç¯‡æ–‡ç« å°†ä¼šå®Œå…¨æ˜¯æ··ä¹±çš„ç»“æ„ï¼Œæ··ä¹±çš„è®°å½•ã€‚ æ˜¨å¤©ä¸‹ç­æƒ³ï¼Œè¿™ä¸ªå‘¨æœ«è¦æŠŠæ‹–äº†å¾ˆä¹…çš„è‡ªå·±å»ºä¸€ä¸ªk8sé›†ç¾¤è¿™ä»¶äº‹ç»™åŠäº†ï¼Œç»“æœæ²¡æƒ³åˆ°ï¼Œç»ˆç©¶è¿˜æ˜¯åªåšäº†ä¸€åŠ</description>
    </item>
    
    <item>
      <title>Python Reload</title>
      <link>https://ZmN5.github.io/post/python-reload/</link>
      <pubDate>Thu, 28 Mar 2019 22:11:54 +0800</pubDate>
      
      <guid>https://ZmN5.github.io/post/python-reload/</guid>
      <description>å’Œç®—æ³•åŒå­¦çš„åˆä½œï¼Œä¸€èˆ¬éƒ½æ˜¯è°ƒç”¨ç®—æ³•åŒå­¦å†™çš„package, ç„¶åå¼€å§‹èƒ¡æ ä½†æ˜¯ç°åœ¨æœ‰ä¸€ä¸ªéœ€æ±‚ï¼Œè¦åŠ¨æ€åŠ è½½ç®—æ³•åŒå­¦çš„ä»£ç ï¼Œä¸ºä»€ä¹ˆä¼šæœ‰è¿™ä¹ˆå¥‡æ€ªçš„éœ€æ±‚</description>
    </item>
    
    <item>
      <title>Pythonæè¿°ç¬¦åè®®æ€»ç»“</title>
      <link>https://ZmN5.github.io/post/python-descriptor/</link>
      <pubDate>Sun, 20 Jan 2019 19:55:58 +0800</pubDate>
      
      <guid>https://ZmN5.github.io/post/python-descriptor/</guid>
      <description>æœ¬æ–‡ä¸»è¦ç¿»è¯‘è‡ªDescriptor HowTo Guide, å¦å¤–åŠ äº†ä¸€ä¸‹è‡ªå·±çš„ç†è§£ã€‚ æè¿°ç¬¦åè®®æ˜¯ä»€ä¹ˆï¼Ÿ å¦‚æœä¸€ä¸ªç±»å®ç°äº†__set__, __get__, __delete__ï¼Œè¿™ä¸‰</description>
    </item>
    
    <item>
      <title>ä¸€ç§æœ‰æ„æ€çš„æ­»é”</title>
      <link>https://ZmN5.github.io/post/a-interesting-deadlock/</link>
      <pubDate>Thu, 17 Jan 2019 01:03:13 +0800</pubDate>
      
      <guid>https://ZmN5.github.io/post/a-interesting-deadlock/</guid>
      <description>&lt;p&gt;åˆšé—²é€›æ—¶å€™å‘ç°æœ‰&lt;a href=&#34;https://python-gino.readthedocs.io/zh/latest/why.html#the-story&#34;&gt;ä¸€ç¯‡æ–‡ç« &lt;/a&gt;è®²äº†ä¸€ç§æœ‰æ„æ€çš„æ­»é”ï¼Œä¸æ˜¯äº²èº«ç»å†ï¼Œä½†æ˜¯ä¹Ÿå¾ˆæœ‰æ„æ€äº†ã€‚&lt;/p&gt;
&lt;p&gt;å…ˆä¼šè®®ä¸€ä¸‹æ­»é”çš„å®šä¹‰æ˜¯ä»€ä¹ˆï¼Ÿç¿»å‡ºå‹ç®±åº•çš„&lt;code&gt;ç°ä»£æ“ä½œç³»ç»Ÿ&lt;/code&gt;:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;å¦‚æœä¸€ä¸ªè¿›ç¨‹é›†åˆä¸­çš„æ¯ä¸ªè¿›ç¨‹éƒ½åªèƒ½ç­‰å¾…ç”±è¯¥è¿›ç¨‹é›†åˆä¸­çš„å…¶ä»–è¿›ç¨‹æ‰èƒ½å¼•å‘çš„äº‹ä»¶ï¼Œé‚£ä¹ˆï¼Œè¯¥è¿›ç¨‹é›†åˆå°±æ˜¯æ­»é”çš„ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;æ‰€ä»¥ï¼Œè¿˜æ˜¯ä¸çŸ¥é“ä»€ä¹ˆæ˜¯æ­»é”ã€‚&lt;/p&gt;
&lt;p&gt;ä¸¾ä¸ªä¾‹å­ï¼Œ&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;æ¯”å¦‚ç”²ä¹™ä¸¤äººåŒæ—¶å»é£Ÿå ‚åƒé¥­ï¼Œé£Ÿå ‚é‡Œé¢åªæœ‰ä¸€ä¸ªç¢—å’Œä¸€åŒç­·å­ï¼Œç”²æŠ¢åˆ°äº†ç¢—ï¼Œä¹™æŠ¢åˆ°äº†ç­·å­ï¼Œç”²ç­‰ä¹™æ”¾ä¸‹ç­·å­ï¼Œä¹™ç­‰ç”²æ”¾ä¸‹ç¢—ï¼Œç»“æœä¸¤ä¸ªäººéƒ½é¥¿æ­»äº†ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;åˆæ¯”å¦‚:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Aå’ŒBä¸¤ä¸ªè¿›ç¨‹åŒæ—¶å»å†™æ•°æ®åº“ï¼ŒAé”ä½äº†ç¬¬nè¡Œå»è¯»ç¬¬mè¡Œï¼ŒBé”ä½äº†ç¬¬mè¡Œå»è¯»ç¬¬nè¡Œï¼Œç»“æœAï¼ŒBéƒ½æ— é™æœŸç­‰ä¸‹å»äº†ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;æ— è®ºæ˜¯&lt;code&gt;ç”²&lt;/code&gt;,&lt;code&gt;ä¹™&lt;/code&gt;,è¿˜æ˜¯&lt;code&gt;A&lt;/code&gt;,&lt;code&gt;B&lt;/code&gt;,éƒ½åœ¨ç­‰å¾…å¦ä¸€ä¸ªå·²ç»æ­»é”çš„è¿›ç¨‹é‡Šæ”¾èµ„æºã€‚å› ä¸ºæ‰€æœ‰çš„è¿›ç¨‹éƒ½ä¸èƒ½è¿è¡Œï¼Œæ‰€ä»¥èµ„æºæ°¸è¿œæ— æ³•è¢«é‡Šæ”¾ï¼Œæ‰€ä»¥æ‰€æœ‰è¿›ç¨‹éƒ½ä¸èƒ½è¢«å”¤é†’ã€‚è¿›ç¨‹çš„æ•°é‡ä»¥åŠå æœ‰å’Œè¯·æ±‚çš„èµ„æºæ•°é‡éƒ½æ˜¯æ— å…³ç´§è¦çš„ï¼Œè€Œæ— è®ºèµ„æºå’Œä½•ç§ç±»å‹éƒ½ä¼šå‘ç”Ÿä½•ç§ç»“æœï¼Œæ‰€ä»¥è¿™ç§æ­»é”è¢«ç§°ä¸ºèµ„æºæ­»é”ã€‚&lt;/p&gt;
&lt;p&gt;å¥½äº†ï¼ŒæŠ„ä¹¦ç»“æŸï¼Œåˆ’é‡ç‚¹ã€‚&lt;/p&gt;
&lt;p&gt;å¥½å§ï¼Œä¸Šé¢è¿™æ®µè¯éƒ½æ˜¯é‡ç‚¹ã€‚&lt;/p&gt;
&lt;p&gt;åºŸè¯ğŸ‘†&lt;/p&gt;
&lt;p&gt;ä¸‹é¢çœ‹&lt;code&gt;å æœ‰å’Œè¯·æ±‚çš„èµ„æºæ•°é‡éƒ½æ˜¯æ— å…³ç´§è¦çš„ğŸŒ°&lt;/code&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;For example, the first coroutine starts a transaction and updated a row, then the second coroutine tries to update the same row before the first coroutine closes the transaction. The second coroutine will block the whole thread at the non-async update, waiting for the row lock to be released, but the releasing is in the first coroutine which is blocked by the second coroutine. Thus it will block forever.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;ä¹‹å‰åœ¨åç¨‹ä¸­ï¼Œæ¯æ—¶æ¯åˆ»å®é™…éƒ½åªæœ‰ä¸€ä»¶äº‹åœ¨æ‰§è¡Œï¼Œå‘ç”Ÿæ­»é”çš„æ¦‚ç‡åº”è¯¥ä¸é«˜å§ã€‚too youngå•Š&lt;/p&gt;
&lt;p&gt;æ¯”å¦‚ç¬¬ä¸€ä¸ªåç¨‹å‘èµ·äº‹åŠ¡æ›´æ–°æ•°æ®åº“ä¸­çš„ä¸€è¡Œï¼Œè¿™æ—¶å€™ç¬¬äºŒä¸ªåç¨‹è¯•å›¾æ›´æ–°åŒä¸€è¡Œï¼Œå¦‚æœç¬¬äºŒä¸ªåç¨‹æ˜¯éå¼‚æ­¥çš„æ›´æ–°ï¼Œé‚£ä¹ˆå®ƒå°±è¦ç­‰å¾…ç¬¬ä¸€ä¸ªåç¨‹é‡Šæ”¾èµ„æºï¼Œä½†æ˜¯è¿™æ—¶å€™æ•´ä¸ªçº¿ç¨‹å·²ç»è¢«ç¬¬äºŒä¸ªçº¿ç¨‹é˜»å¡äº†ï¼Œç¬¬ä¸€ä¸ªåç¨‹æ— æ³•é‡Šæ”¾èµ„æºï¼Œdeadlock!&lt;/p&gt;
&lt;p&gt;å›å¿†ä¸€ä¸‹ä¹¦æœ¬ä¸­å…³äºèµ„æºæ­»é”çš„å››ä¸ªæ¡ä»¶ï¼Œå›å¿†ä¸€ä¸‹:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;äº’æ–¥æ¡ä»¶&lt;/li&gt;
&lt;li&gt;å æœ‰å’Œç­‰å¾…æ¡ä»¶&lt;/li&gt;
&lt;li&gt;ä¸å¯æŠ¢å æ¡ä»¶&lt;/li&gt;
&lt;li&gt;ç¯è·¯ç­‰å¾…æ¡ä»¶&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;è¿™å››ä¸ªæ¡ä»¶åªè¦æœ‰ä¸€ä¸ªä¸æˆç«‹é‚£ä¹ˆèµ„æºæ­»é”å°±ä¸ä¼šå‘ç”Ÿã€‚&lt;/p&gt;
&lt;p&gt;å¥½äº†ç°åœ¨å¥—ç”¨ä¸€ä¸‹ä¸Šé¢è¿™ä¸ªä¾‹å­ã€‚&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;æ•°æ®åº“è¡Œé”å’Œå½“å‰çº¿ç¨‹æ‰§è¡Œéƒ½æ˜¯äº’æ–¥çš„ï¼Œâœ…&lt;/li&gt;
&lt;li&gt;ç¬¬ä¸€ä¸ªåç¨‹å æœ‰äº†æ•°æ®åº“ä¸­çš„é”ç­‰å¾…çº¿ç¨‹æ‰§è¡Œæƒï¼Œç¬¬äºŒä¸ªåç¨‹å æœ‰äº†å½“å‰åç¨‹çš„æ‰§è¡Œç­‰å¾…è¡Œé”ï¼Œâœ…&lt;/li&gt;
&lt;li&gt;ä¸å¯æŠ¢å ï¼Œâœ…&lt;/li&gt;
&lt;li&gt;ç¯è·¯ç­‰å¾…ï¼Œç¬¬äºŒä¸ªçº¿ç¨‹ç­‰å¾…è¡Œé”ï¼Œç¬¬ä¸€ä¸ªçº¿ç¨‹ç­‰å¾…æœ‰æœºä¼šè¢«æ‰§è¡Œï¼Œâœ…&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;æ­»é”bingo!&lt;/p&gt;
&lt;p&gt;æ€ä¹ˆè§£å†³å‘¢ï¼Ÿ&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;A simple fix would be to defer the database operations into threads, so that they won&amp;rsquo;t block the main thread, thus won&amp;rsquo;t cause a dead lock easily. It usually works and there is even a library to do so. However when it comes to ORM, things become dirty.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;æŠŠæ•°æ®åº“ç›¸å…³æ“ä½œæ‰”ç»™å…¶ä»–çº¿ç¨‹å»æ‰§è¡Œï¼Œç¡®ä¿ä¸ä¼šé˜»å¡ä¸»çº¿ç¨‹å°±è¡Œäº†ã€‚&lt;/p&gt;
&lt;p&gt;ä½†æ˜¯çœŸçš„å°±è¡Œäº†å—ï¼Ÿ&lt;/p&gt;
&lt;p&gt;åœ¨ä¸€ä¸ªå¤æ‚çš„é¡¹ç›®ä¸­ï¼Œä½ æ°¸è¿œä¸çŸ¥é“å“ªä¸€è¡Œä»£ç ä¼šè°ƒç”¨åŒæ­¥ä»£ç é˜»å¡ä¸»çº¿ç¨‹ï¼Œ&lt;code&gt;Racing condition just happens under pressure, and anything that may block will eventually block&lt;/code&gt;, å¯èƒ½ä¼šå‘ç”Ÿçš„äº‹æƒ…ç»ˆå°†è¦å‘ç”Ÿã€‚&lt;/p&gt;
&lt;p&gt;æ‰€ä»¥ä½œè€…å»ºè®®:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;This is usually the time when I suggest to separate the server into two parts: &amp;ldquo;normal blocking with ORM&amp;rdquo; and &amp;ldquo;asynchronous without ORM&amp;rdquo;.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;ä¸è¿‡å€’æ˜¯æƒ³èµ·å¦å¤–ä¸€ä¸ªé—®é¢˜äº†, ç°åœ¨å…¬å¸ä¸šåŠ¡éƒ½æ˜¯ç”¨çš„&lt;code&gt;gunicorn&lt;/code&gt;+&lt;code&gt;gevent&lt;/code&gt;, è¿™ä¸ªå†…éƒ¨æ˜¯æ€ä¹ˆè§£å†³è¿™ä¸ªé—®é¢˜çš„å‘¢&lt;/p&gt;
&lt;p&gt;å¯ä»¥çŒœæµ‹ä¸€ä¸‹ï¼š&lt;/p&gt;
&lt;p&gt;ä¸Šé¢çš„ä¾‹å­é€ æˆæ­»é”æ˜¯å› ä¸ºæœ‰åç¨‹è°ƒç”¨åŒæ­¥æ“ä½œ, è€Œgeventæ˜¯é€šè¿‡&lt;code&gt;monkey_path&lt;/code&gt;çš„æ“ä½œä»åº•å±‚æ”¹å˜æ‰€æœ‰è¯·æ±‚çš„è¡Œä¸ºï¼Œå°±æ²¡æœ‰è¿™ä¸ªé—®é¢˜äº†ã€‚&lt;/p&gt;
&lt;p&gt;ä¸è¿‡è¿˜æœ‰å…¶ä»–é—®é¢˜ã€‚&lt;/p&gt;
&lt;p&gt;&lt;code&gt;monkey_patch&lt;/code&gt;é’ˆå¯¹Pythonä»£ç æœ‰æ•ˆï¼Œå¦‚æœæ•°æ®åº“è¿æ¥å™¨ç”¨çš„æ˜¯cæ‰©å±•ï¼Œemmm&amp;hellip;å¯ä»¥å¤§èƒ†çš„çŒœæµ‹ä¸€ä¸‹å¯èƒ½çš„bug&lt;/p&gt;
&lt;p&gt;å‚è€ƒèµ„æ–™ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;ç°ä»£æ“ä½œç³»ç»Ÿ&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://python-gino.readthedocs.io/zh/latest/why.html#the-story&#34;&gt;https://python-gino.readthedocs.io/zh/latest/why.html#the-story&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;</description>
    </item>
    
    <item>
      <title>2018å°ç»“</title>
      <link>https://ZmN5.github.io/post/summary-2018/</link>
      <pubDate>Mon, 31 Dec 2018 20:47:08 +0800</pubDate>
      
      <guid>https://ZmN5.github.io/post/summary-2018/</guid>
      <description>2018è¿‡å®Œäº†ï¼Œé©¬ä¸Šå°±å°±è¦27äº†ã€‚ 27äº†ï¼ï¼ï¼ 2018æ˜¯äººç”Ÿä¸­ç¬¬ä¸€ä¸ªä»å§‹è‡³ç»ˆéƒ½åœ¨ä¸Šç­çš„å¹´ä»½ï¼Œæœ€å¤§çš„æ„Ÿå—å°±æ˜¯ï¼Œæ—¶é—´è¿‡çš„å¥½å¿«å•Šï¼ ä¸€ã€èº«ä½“ï¼š æ˜æ˜¾çš„</description>
    </item>
    
    <item>
      <title>æ€ä¹ˆç†è§£å¼‚æ­¥(2)</title>
      <link>https://ZmN5.github.io/post/how-to-study-async2/</link>
      <pubDate>Sun, 30 Dec 2018 09:23:43 +0800</pubDate>
      
      <guid>https://ZmN5.github.io/post/how-to-study-async2/</guid>
      <description>å…ˆå›é¡¾ä¸€ä¸‹ä¸Šä¸€ç¯‡æ–‡ç« æ€ä¹ˆç†è§£å¼‚æ­¥(1) å¯¹å¼‚æ­¥ç¼–ç¨‹æ¥è¯´ï¼Œéœ€è¦ä»£ç æ®µåœ¨æŠŠæ§åˆ¶æƒç§»äº¤ç»™loopæ—¶å€™ï¼Œä¿å­˜å½“å‰continuation, ä»¥ä¾¿äºäº‹ä»¶å‘</description>
    </item>
    
    <item>
      <title>æ€ä¹ˆç†è§£å¼‚æ­¥?(1)</title>
      <link>https://ZmN5.github.io/post/how-to-study-async/</link>
      <pubDate>Sat, 29 Dec 2018 20:52:03 +0800</pubDate>
      
      <guid>https://ZmN5.github.io/post/how-to-study-async/</guid>
      <description></description>
    </item>
    
    <item>
      <title>æ€ä¹ˆç†è§£CPS?(1)</title>
      <link>https://ZmN5.github.io/post/cps1/</link>
      <pubDate>Sun, 11 Nov 2018 02:19:24 +0800</pubDate>
      
      <guid>https://ZmN5.github.io/post/cps1/</guid>
      <description>è¿™æ®µæ—¶é—´å­¦racketç»ˆäºé‡åˆ°äº†ä¼ è¯´ä¸­çš„CPS, ä¸å‡ºæ„å¤–æœç„¶å¾ˆéš¾ç†è§£ã€‚å…ˆæ¥çœ‹ä¸€ä¸‹ç»´åŸºç™¾ç§‘ä¸­å¯¹CPSçš„å®šä¹‰: In functional programming, continuation-passing style (CPS) is a style of programming in which control is passed explicitly</description>
    </item>
    
    <item>
      <title>Django ormæ”¹å­—æ®µåé€ æˆæ•°æ®ä¸¢å¤±</title>
      <link>https://ZmN5.github.io/post/django-orm-change-field-name/</link>
      <pubDate>Sat, 10 Nov 2018 21:34:22 +0800</pubDate>
      
      <guid>https://ZmN5.github.io/post/django-orm-change-field-name/</guid>
      <description>&lt;h3 id=&#34;ä¸€-ç°åœº&#34;&gt;ä¸€. ç°åœºï¼š&lt;/h3&gt;
&lt;p&gt;ä»¥ä¸ºæ˜¯ä¿®æ”¹ä¸€ä¸ªå˜é‡åï¼Œä½†åœ¨django ormå†…éƒ¨å¹¶ä¸è¿™ä¹ˆè®¤ä¸ºï¼š&lt;/p&gt;
&lt;p&gt;model:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span class=&#34;err&#34;&gt;æ—§&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;åˆ—&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;å&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;ï¼š&lt;/span&gt;
&lt;span class=&#34;n&#34;&gt;cos_path&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;models&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;CharField&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;max_length&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;200&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;null&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;True&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;verbose_name&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;sa&#34;&gt;&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;å­˜å‚¨è·¯å¾„&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;

&lt;span class=&#34;err&#34;&gt;æ–°&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;åˆ—&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;å&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
&lt;span class=&#34;n&#34;&gt;storage_path&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;models&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;CharField&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;max_length&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;200&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;null&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;True&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;verbose_name&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;sa&#34;&gt;&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;å­˜å‚¨è·¯å¾„&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;migrations:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span class=&#34;n&#34;&gt;operations&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;migrations&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;RemoveField&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;model_name&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;sa&#34;&gt;&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;insurancedocument&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;sa&#34;&gt;&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;cos_path&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;migrations&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;AddField&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;model_name&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;sa&#34;&gt;&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;insurancedocument&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;sa&#34;&gt;&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;storage_path&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
       &lt;span class=&#34;n&#34;&gt;field&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;models&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;CharField&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;max_length&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;200&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;null&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;True&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;verbose_name&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;sa&#34;&gt;&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;å­˜å‚¨è·¯å¾„&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;sql:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sql&#34; data-lang=&#34;sql&#34;&gt;&lt;span class=&#34;k&#34;&gt;BEGIN&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;span class=&#34;c1&#34;&gt;--
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;-- Remove field cos_path from insurancedocument
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;--
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;ALTER&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;TABLE&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;`&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;apis_insurancedocument&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;`&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;DROP&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;COLUMN&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;`&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;cos_path&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;`&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;span class=&#34;c1&#34;&gt;--
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;-- Add field storage_path to insurancedocument
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;--
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;ALTER&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;TABLE&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;`&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;apis_insurancedocument&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;`&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;ADD&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;COLUMN&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;`&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;storage_path&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;`&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;varchar&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;200&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;NULL&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;span class=&#34;k&#34;&gt;COMMIT&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;æ‰€ä»¥åœ¨Django ormé‡Œé¢è®¤ä¸ºè¿™æ˜¯åˆ å»äº†ä¸€ä¸ªå­—æ®µï¼Œç„¶ååˆæ–°å¢äº†ä¸€ä¸ªå­—æ®µï¼Œç„¶åæ•°æ®å°±ä¸¢äº†ã€‚&lt;/p&gt;
&lt;h3 id=&#34;äºŒ-å…¶ä»–djangoæ”¹åˆ—åæ‰‹æ®µ&#34;&gt;äºŒ. å…¶ä»–djangoæ”¹åˆ—åæ‰‹æ®µ&lt;/h3&gt;
&lt;h4 id=&#34;1-åˆ©ç”¨db_column-æ”¹å&#34;&gt;1. åˆ©ç”¨db_column æ”¹å&lt;/h4&gt;
&lt;p&gt;æ“ä½œå¦‚ä¸‹ï¼Œåˆ©ç”¨db_columnæ¥æ”¹å˜å­—æ®µåçš„ï¼Œç„¶åï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span class=&#34;n&#34;&gt;cos_path&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;models&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;CharField&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;max_length&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;200&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;null&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;True&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;verbose_name&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;sa&#34;&gt;&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;å­˜å‚¨è·¯å¾„&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;

&lt;span class=&#34;n&#34;&gt;storage_path&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;models&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;CharField&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;max_length&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;200&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;null&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;True&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;db_column&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;sa&#34;&gt;&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;cos_path&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;verbose_name&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;sa&#34;&gt;&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;å­˜å‚¨è·¯å¾„&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sql&#34; data-lang=&#34;sql&#34;&gt;
&lt;span class=&#34;k&#34;&gt;BEGIN&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;span class=&#34;c1&#34;&gt;--
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;-- Remove field cos_path from insurancedocument
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;--
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;ALTER&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;TABLE&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;`&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;apis_insurancedocument&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;`&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;DROP&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;COLUMN&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;`&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;cos_path&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;`&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;span class=&#34;c1&#34;&gt;--
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;-- Add field storage_path to insurancedocument
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;--
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;ALTER&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;TABLE&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;`&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;apis_insurancedocument&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;`&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;ADD&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;COLUMN&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;`&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;cos_path&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;`&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;varchar&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;200&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;NULL&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;span class=&#34;k&#34;&gt;COMMIT&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;

&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;django ormä¼šå…ˆæŠŠcos_pathé‚£ä¸ªå­—æ®µç»™dropæ‰ï¼Œæ•°æ®è¿˜ä¼šä¸¢å¤±ã€‚&lt;/p&gt;
&lt;h4 id=&#34;2-åˆ©ç”¨rename-fieldæ”¹å&#34;&gt;2. åˆ©ç”¨rename fieldæ”¹å&lt;/h4&gt;
&lt;p&gt;(1) åˆ©ç”¨python manage.py makemigrations &amp;ndash;empty apisåˆ›å»ºä¸€ä¸ªæ–°çš„migrationsæ–‡ä»¶, ç¼–è¾‘ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;19
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;20
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;21
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;22
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;23
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;24
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;25
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span class=&#34;kn&#34;&gt;from&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;django.db&lt;/span&gt; &lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;migrations&lt;/span&gt;
&lt;span class=&#34;kn&#34;&gt;from&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;django.db&lt;/span&gt; &lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;models&lt;/span&gt;


&lt;span class=&#34;k&#34;&gt;class&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;Migration&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;migrations&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Migration&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;

    &lt;span class=&#34;n&#34;&gt;dependencies&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;
        &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;sa&#34;&gt;&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;apis&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;sa&#34;&gt;&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;0006_auto_20180724_1039&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;

    &lt;span class=&#34;n&#34;&gt;operations&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;migrations&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;AlterField&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;
            &lt;span class=&#34;n&#34;&gt;model_name&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;sa&#34;&gt;&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;insurancedocument&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
            &lt;span class=&#34;n&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;sa&#34;&gt;&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;cos_path&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
            &lt;span class=&#34;n&#34;&gt;field&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;models&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;CharField&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;
                &lt;span class=&#34;n&#34;&gt;max_length&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;200&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;null&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;True&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;verbose_name&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;sa&#34;&gt;&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;å­˜å‚¨è·¯å¾„&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;&lt;/span&gt;
            &lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
        &lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;migrations&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;RenameField&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;
            &lt;span class=&#34;n&#34;&gt;model_name&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;sa&#34;&gt;&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;insurancedocument&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
            &lt;span class=&#34;n&#34;&gt;old_name&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;sa&#34;&gt;&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;cos_path&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
            &lt;span class=&#34;n&#34;&gt;new_name&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;sa&#34;&gt;&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;storage_path&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
        &lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;

&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;(2)æ‰§è¡Œçš„sqlè¯­å¥ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;9
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sql&#34; data-lang=&#34;sql&#34;&gt;&lt;span class=&#34;k&#34;&gt;BEGIN&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;span class=&#34;c1&#34;&gt;--
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;-- Alter field cos_path on insurancedocument
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;--
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;--
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;-- Rename field cos_path on insurancedocument to storage_path
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;--
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;ALTER&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;TABLE&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;`&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;apis_insurancedocument&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;`&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;CHANGE&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;`&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;cos_path&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;`&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;`&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;storage_path&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;`&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;varchar&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;200&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;NULL&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;span class=&#34;k&#34;&gt;COMMIT&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;è¿™æ—¶å€™djangoæ‰è®¤ä¸ºæ‰§è¡Œçš„æ˜¯æ”¹åæ“ä½œï¼Œ æŸ¥çœ‹migrateä¹‹åçš„æ•°æ®åº“å‘ç°æ•°æ®æ²¡æœ‰ä¸¢å¤±ã€‚&lt;/p&gt;
&lt;p&gt;ä½†æ˜¯è¿™ç§æ“ä½œå¯¹mysqlæ¥è¯´è²Œä¼¼éƒ½æ˜¯é‡å»ºä¸€å¼ æ–°è¡¨ï¼Œç„¶åæŠŠæ—§è¡¨å†…å®¹æ’å…¥æ–°è¡¨é‡Œé¢ï¼Œè€—æ—¶é•¿, éœ€è¦åœæœ è€Œä¸”å±é™©ï¼Œ æ‰€ä»¥è¡¥å……æ¯…æ€»è¯´çš„ä¸€ç§æ–¹æ³•ï¼š&lt;/p&gt;
&lt;h4 id=&#34;3-ä¸åœæœæ”¹å&#34;&gt;3 ä¸åœæœæ”¹å&lt;/h4&gt;
&lt;ol&gt;
&lt;li&gt;å…ˆåŠ åˆ—ï¼Œæ”¹ä»£ç æ¥è¯»è€åˆ—&amp;amp;&amp;amp;åŒå†™ï¼Œ&lt;/li&gt;
&lt;li&gt;é€šè¿‡ sql æˆ–è€…ä»£ç å¤åˆ¶åŸåˆ—æ•°æ®åˆ°æ–°åˆ—ï¼Œ&lt;/li&gt;
&lt;li&gt;ä»£ç å†åˆ‡æ¢æˆè¯»å†™æ–°åˆ—ï¼Œ&lt;/li&gt;
&lt;li&gt;å†åšæ¸…ç†è€åˆ—çš„äº‹æƒ…&lt;/li&gt;
&lt;/ol&gt;
&lt;h4 id=&#34;4-è¿˜æ˜¯ä¸è¦æ”¹åå­—äº†&#34;&gt;4 è¿˜æ˜¯ä¸è¦æ”¹åå­—äº†&lt;/h4&gt;
&lt;h2 id=&#34;åæ€&#34;&gt;åæ€:&lt;/h2&gt;
&lt;hr&gt;
&lt;ol&gt;
&lt;li&gt;åœ¨çº¿ä¸Šæ‰§è¡Œè¿™ç§éœ€è¦Schema Operationsçš„äº‹æƒ…ï¼Œç¡®è®¤æ˜¯å¦å¿…è¦&lt;/li&gt;
&lt;li&gt;è¿˜æ˜¯ä¸è¦ç”¨django migrationäº†&lt;/li&gt;
&lt;li&gt;æ‰§è¡Œsqlmigrateï¼Œ ç¡®è®¤django ormåˆ°åº•ä¼šå¹²ä»€ä¹ˆäº‹æƒ…&lt;/li&gt;
&lt;li&gt;æœ¬åœ°å®éªŒï¼Œè¯æ˜æ“ä½œæ— å®³&lt;/li&gt;
&lt;/ol&gt;</description>
    </item>
    
    <item>
      <title>About Me</title>
      <link>https://ZmN5.github.io/post/about/</link>
      <pubDate>Sat, 10 Nov 2018 20:59:00 +0800</pubDate>
      
      <guid>https://ZmN5.github.io/post/about/</guid>
      <description>&lt;ul&gt;
&lt;li&gt;åœ¨åŒ—äº¬&lt;/li&gt;
&lt;li&gt;å·¥ä½œä¸­ä¸»è¦ä½¿ç”¨Python&lt;/li&gt;
&lt;li&gt;è„šæœ¬å·¥ç¨‹å¸ˆï¼Œåå…«çº¿ç¨‹åºå‘˜&lt;/li&gt;
&lt;li&gt;åœ¨å­¦racket&lt;/li&gt;
&lt;li&gt;å‡è‚¥ä¸­&lt;/li&gt;
&lt;li&gt;ç°åœ¨&lt;del&gt;çˆ±å› äº’åŠ¨&lt;/del&gt;&lt;/li&gt;
&lt;li&gt;ç°åœ¨ç¾å›¢å·¥ä½œ&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;2020å¹´è¯»ä¹¦è®°å½•&#34;&gt;2020å¹´è¯»ä¹¦è®°å½•&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;input checked=&#34;&#34; disabled=&#34;&#34; type=&#34;checkbox&#34;&gt;SICP ï¼ˆreading ä»Šå¹´ä¸€å®šè¦è¯»å®Œï¼ï¼ï¼ï¼‰&lt;/li&gt;
&lt;li&gt;&lt;input checked=&#34;&#34; disabled=&#34;&#34; type=&#34;checkbox&#34;&gt;ç³»ç»ŸåŒ–æ€ç»´å¯¼è®º [reading]&lt;/li&gt;
&lt;li&gt;&lt;input disabled=&#34;&#34; type=&#34;checkbox&#34;&gt;The Practice of Programming [TODO]&lt;/li&gt;
&lt;li&gt;&lt;input checked=&#34;&#34; disabled=&#34;&#34; type=&#34;checkbox&#34;&gt;UNIX and Linux System Administration Handbook, 5th&lt;/li&gt;
&lt;li&gt;&lt;input disabled=&#34;&#34; type=&#34;checkbox&#34;&gt;ç³»ç»Ÿæ¶æ„ [TODO]&lt;/li&gt;
&lt;li&gt;&lt;input disabled=&#34;&#34; type=&#34;checkbox&#34;&gt;æ“ä½œç³»ç»Ÿå¯¼è®º&lt;/li&gt;
&lt;li&gt;&lt;input checked=&#34;&#34; disabled=&#34;&#34; type=&#34;checkbox&#34;&gt;è½¯ä»¶éšæƒ³å½•&lt;/li&gt;
&lt;li&gt;&lt;input checked=&#34;&#34; disabled=&#34;&#34; type=&#34;checkbox&#34;&gt;æ›¼æ˜†ç»æµå­¦åŸç†ï¼ˆå®è§‚ï¼‰&lt;/li&gt;
&lt;li&gt;&lt;input disabled=&#34;&#34; type=&#34;checkbox&#34;&gt;ä¿¡æ¯è®ºåŸºç¡€&lt;/li&gt;
&lt;li&gt;&lt;input disabled=&#34;&#34; type=&#34;checkbox&#34;&gt;äººæœˆç¥è¯&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;2019å¹´è¯»ä¹¦è®°å½•&#34;&gt;2019å¹´è¯»ä¹¦è®°å½•&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;input checked=&#34;&#34; disabled=&#34;&#34; type=&#34;checkbox&#34;&gt;é¢†åŸŸé©±åŠ¨è®¾è®¡&lt;/li&gt;
&lt;li&gt;&lt;input checked=&#34;&#34; disabled=&#34;&#34; type=&#34;checkbox&#34;&gt;é‡æ„&lt;/li&gt;
&lt;li&gt;&lt;input checked=&#34;&#34; disabled=&#34;&#34; type=&#34;checkbox&#34;&gt;æ€§èƒ½ä¹‹å·…&lt;/li&gt;
&lt;li&gt;&lt;input checked=&#34;&#34; disabled=&#34;&#34; type=&#34;checkbox&#34;&gt;äº¿çº§æµé‡ç½‘ç«™æ¶æ„æ ¸å¿ƒæŠ€æœ¯&lt;/li&gt;
&lt;li&gt;&lt;input checked=&#34;&#34; disabled=&#34;&#34; type=&#34;checkbox&#34;&gt;webæ€§èƒ½æƒå¨æŒ‡å—&lt;/li&gt;
&lt;li&gt;&lt;input checked=&#34;&#34; disabled=&#34;&#34; type=&#34;checkbox&#34;&gt;è‡ªå·±åŠ¨æ‰‹å†™docker&lt;/li&gt;
&lt;li&gt;&lt;input checked=&#34;&#34; disabled=&#34;&#34; type=&#34;checkbox&#34;&gt;dockerå®¹å™¨ä¸å®¹å™¨äº‘&lt;/li&gt;
&lt;li&gt;&lt;input checked=&#34;&#34; disabled=&#34;&#34; type=&#34;checkbox&#34;&gt;go programming&lt;/li&gt;
&lt;li&gt;&lt;input checked=&#34;&#34; disabled=&#34;&#34; type=&#34;checkbox&#34;&gt;javaç¼–ç¨‹æ€æƒ³&lt;/li&gt;
&lt;li&gt;&lt;input checked=&#34;&#34; disabled=&#34;&#34; type=&#34;checkbox&#34;&gt;æ˜Ÿèˆ¹ä¼å…µ&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;2018å¹´è¯»ä¹¦è®°å½•&#34;&gt;2018å¹´è¯»ä¹¦è®°å½•&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;input checked=&#34;&#34; disabled=&#34;&#34; type=&#34;checkbox&#34;&gt;è®¾è®¡æ¨¡å¼&lt;/li&gt;
&lt;li&gt;&lt;input checked=&#34;&#34; disabled=&#34;&#34; type=&#34;checkbox&#34;&gt;ä»£ç å¤§å…¨&lt;/li&gt;
&lt;li&gt;&lt;input checked=&#34;&#34; disabled=&#34;&#34; type=&#34;checkbox&#34;&gt;æ•°æ®ä»“åº“å·¥å…·ç®±&lt;/li&gt;
&lt;li&gt;&lt;input checked=&#34;&#34; disabled=&#34;&#34; type=&#34;checkbox&#34;&gt;TCP/IPè¯¦è§£&lt;/li&gt;
&lt;li&gt;&lt;input checked=&#34;&#34; disabled=&#34;&#34; type=&#34;checkbox&#34;&gt;ç¨‹åºå‘˜çš„è‡ªæˆ‘ä¿®å…»&lt;/li&gt;
&lt;li&gt;&lt;input checked=&#34;&#34; disabled=&#34;&#34; type=&#34;checkbox&#34;&gt;scala programming&lt;/li&gt;
&lt;li&gt;&lt;input checked=&#34;&#34; disabled=&#34;&#34; type=&#34;checkbox&#34;&gt;ä¹Œåˆä¹‹ä¼—&lt;/li&gt;
&lt;li&gt;&lt;input checked=&#34;&#34; disabled=&#34;&#34; type=&#34;checkbox&#34;&gt;ç¼–ç  * éšåŒ¿åœ¨è®¡ç®—æœºè½¯ç¡¬ä»¶èƒŒåçš„è¯­è¨€&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;2017å¹´è¯»ä¹¦ç¬”è®°&#34;&gt;2017å¹´è¯»ä¹¦ç¬”è®°&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;input checked=&#34;&#34; disabled=&#34;&#34; type=&#34;checkbox&#34;&gt;pythonå­¦ä¹ æ‰‹å†Œ&lt;/li&gt;
&lt;li&gt;&lt;input checked=&#34;&#34; disabled=&#34;&#34; type=&#34;checkbox&#34;&gt;æµç•…çš„Python&lt;/li&gt;
&lt;li&gt;&lt;input checked=&#34;&#34; disabled=&#34;&#34; type=&#34;checkbox&#34;&gt;ç°ä»£æ“ä½œç³»ç»Ÿ&lt;/li&gt;
&lt;li&gt;&lt;input checked=&#34;&#34; disabled=&#34;&#34; type=&#34;checkbox&#34;&gt;è®¡ç®—æœºç½‘ç»œè‡ªé¡¶å‘ä¸‹&lt;/li&gt;
&lt;li&gt;&lt;input checked=&#34;&#34; disabled=&#34;&#34; type=&#34;checkbox&#34;&gt;åŸºåœ°ç³»åˆ—&lt;/li&gt;
&lt;/ul&gt;</description>
    </item>
    
  </channel>
</rss>