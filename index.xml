<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>ç§Ÿå—å¢“åœ°ï¼Œä¿¯ç°å¸ˆèŒƒå­¦é™¢</title>
    <link>https://fucangyu.github.io/</link>
    <description>Recent content on ç§Ÿå—å¢“åœ°ï¼Œä¿¯ç°å¸ˆèŒƒå­¦é™¢</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>en</language>
    <lastBuildDate>Sat, 30 Mar 2019 23:04:44 +0800</lastBuildDate>
    
	<atom:link href="https://fucangyu.github.io/index.xml" rel="self" type="application/rss+xml" />
    
    
    <item>
      <title>ä¸€æ¬¡å¤±è´¥çš„k8séƒ¨ç½²ç»å†</title>
      <link>https://fucangyu.github.io/post/failed-k8s-cluster/</link>
      <pubDate>Sat, 30 Mar 2019 23:04:44 +0800</pubDate>
      
      <guid>https://fucangyu.github.io/post/failed-k8s-cluster/</guid>
      <description>è¿™ç¯‡æ–‡ç« å°†ä¼šå®Œå…¨æ˜¯æ··ä¹±çš„ç»“æ„ï¼Œæ··ä¹±çš„è®°å½•ã€‚ æ˜¨å¤©ä¸‹ç­æƒ³ï¼Œè¿™ä¸ªå‘¨æœ«è¦æŠŠæ‹–äº†å¾ˆä¹…çš„è‡ªå·±å»ºä¸€ä¸ªk8sé›†ç¾¤è¿™ä»¶äº‹ç»™åŠäº†ï¼Œç»“æœæ²¡æƒ³åˆ°ï¼Œç»ˆç©¶è¿˜æ˜¯åªåšäº†ä¸€åŠ</description>
    </item>
    
    <item>
      <title>Python Reload</title>
      <link>https://fucangyu.github.io/post/python-reload/</link>
      <pubDate>Thu, 28 Mar 2019 22:11:54 +0800</pubDate>
      
      <guid>https://fucangyu.github.io/post/python-reload/</guid>
      <description>å’Œç®—æ³•åŒå­¦çš„åˆä½œï¼Œä¸€èˆ¬éƒ½æ˜¯è°ƒç”¨ç®—æ³•åŒå­¦å†™çš„package, ç„¶åå¼€å§‹èƒ¡æ ä½†æ˜¯ç°åœ¨æœ‰ä¸€ä¸ªéœ€æ±‚ï¼Œè¦åŠ¨æ€åŠ è½½ç®—æ³•åŒå­¦çš„ä»£ç ï¼Œä¸ºä»€ä¹ˆä¼šæœ‰è¿™ä¹ˆå¥‡æ€ªçš„éœ€æ±‚</description>
    </item>
    
    <item>
      <title>Pythonæè¿°ç¬¦åè®®æ€»ç»“</title>
      <link>https://fucangyu.github.io/post/python-descriptor/</link>
      <pubDate>Sun, 20 Jan 2019 19:55:58 +0800</pubDate>
      
      <guid>https://fucangyu.github.io/post/python-descriptor/</guid>
      <description>æœ¬æ–‡ä¸»è¦ç¿»è¯‘è‡ªDescriptor HowTo Guide, å¦å¤–åŠ äº†ä¸€ä¸‹è‡ªå·±çš„ç†è§£ã€‚ æè¿°ç¬¦åè®®æ˜¯ä»€ä¹ˆï¼Ÿ å¦‚æœä¸€ä¸ªç±»å®ç°äº†__set__, __get__, __delete__ï¼Œè¿™ä¸‰</description>
    </item>
    
    <item>
      <title>ä¸€ç§æœ‰æ„æ€çš„æ­»é”</title>
      <link>https://fucangyu.github.io/post/a-interesting-deadlock/</link>
      <pubDate>Thu, 17 Jan 2019 01:03:13 +0800</pubDate>
      
      <guid>https://fucangyu.github.io/post/a-interesting-deadlock/</guid>
      <description>&lt;p&gt;åˆšé—²é€›æ—¶å€™å‘ç°æœ‰&lt;a href=&#34;https://python-gino.readthedocs.io/zh/latest/why.html#the-story&#34;&gt;ä¸€ç¯‡æ–‡ç« &lt;/a&gt;è®²äº†ä¸€ç§æœ‰æ„æ€çš„æ­»é”ï¼Œä¸æ˜¯äº²èº«ç»å†ï¼Œä½†æ˜¯ä¹Ÿå¾ˆæœ‰æ„æ€äº†ã€‚&lt;/p&gt;

&lt;p&gt;å…ˆä¼šè®®ä¸€ä¸‹æ­»é”çš„å®šä¹‰æ˜¯ä»€ä¹ˆï¼Ÿç¿»å‡ºå‹ç®±åº•çš„&lt;code&gt;ç°ä»£æ“ä½œç³»ç»Ÿ&lt;/code&gt;:&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;å¦‚æœä¸€ä¸ªè¿›ç¨‹é›†åˆä¸­çš„æ¯ä¸ªè¿›ç¨‹éƒ½åªèƒ½ç­‰å¾…ç”±è¯¥è¿›ç¨‹é›†åˆä¸­çš„å…¶ä»–è¿›ç¨‹æ‰èƒ½å¼•å‘çš„äº‹ä»¶ï¼Œé‚£ä¹ˆï¼Œè¯¥è¿›ç¨‹é›†åˆå°±æ˜¯æ­»é”çš„ã€‚&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;æ‰€ä»¥ï¼Œè¿˜æ˜¯ä¸çŸ¥é“ä»€ä¹ˆæ˜¯æ­»é”ã€‚&lt;/p&gt;

&lt;p&gt;ä¸¾ä¸ªä¾‹å­ï¼Œ&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;æ¯”å¦‚ç”²ä¹™ä¸¤äººåŒæ—¶å»é£Ÿå ‚åƒé¥­ï¼Œé£Ÿå ‚é‡Œé¢åªæœ‰ä¸€ä¸ªç¢—å’Œä¸€åŒç­·å­ï¼Œç”²æŠ¢åˆ°äº†ç¢—ï¼Œä¹™æŠ¢åˆ°äº†ç­·å­ï¼Œç”²ç­‰ä¹™æ”¾ä¸‹ç­·å­ï¼Œä¹™ç­‰ç”²æ”¾ä¸‹ç¢—ï¼Œç»“æœä¸¤ä¸ªäººéƒ½é¥¿æ­»äº†ã€‚&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;åˆæ¯”å¦‚:&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Aå’ŒBä¸¤ä¸ªè¿›ç¨‹åŒæ—¶å»å†™æ•°æ®åº“ï¼ŒAé”ä½äº†ç¬¬nè¡Œå»è¯»ç¬¬mè¡Œï¼ŒBé”ä½äº†ç¬¬mè¡Œå»è¯»ç¬¬nè¡Œï¼Œç»“æœAï¼ŒBéƒ½æ— é™æœŸç­‰ä¸‹å»äº†ã€‚&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;æ— è®ºæ˜¯&lt;code&gt;ç”²&lt;/code&gt;,&lt;code&gt;ä¹™&lt;/code&gt;,è¿˜æ˜¯&lt;code&gt;A&lt;/code&gt;,&lt;code&gt;B&lt;/code&gt;,éƒ½åœ¨ç­‰å¾…å¦ä¸€ä¸ªå·²ç»æ­»é”çš„è¿›ç¨‹é‡Šæ”¾èµ„æºã€‚å› ä¸ºæ‰€æœ‰çš„è¿›ç¨‹éƒ½ä¸èƒ½è¿è¡Œï¼Œæ‰€ä»¥èµ„æºæ°¸è¿œæ— æ³•è¢«é‡Šæ”¾ï¼Œæ‰€ä»¥æ‰€æœ‰è¿›ç¨‹éƒ½ä¸èƒ½è¢«å”¤é†’ã€‚è¿›ç¨‹çš„æ•°é‡ä»¥åŠå æœ‰å’Œè¯·æ±‚çš„èµ„æºæ•°é‡éƒ½æ˜¯æ— å…³ç´§è¦çš„ï¼Œè€Œæ— è®ºèµ„æºå’Œä½•ç§ç±»å‹éƒ½ä¼šå‘ç”Ÿä½•ç§ç»“æœï¼Œæ‰€ä»¥è¿™ç§æ­»é”è¢«ç§°ä¸ºèµ„æºæ­»é”ã€‚&lt;/p&gt;

&lt;p&gt;å¥½äº†ï¼ŒæŠ„ä¹¦ç»“æŸï¼Œåˆ’é‡ç‚¹ã€‚&lt;/p&gt;

&lt;p&gt;å¥½å§ï¼Œä¸Šé¢è¿™æ®µè¯éƒ½æ˜¯é‡ç‚¹ã€‚&lt;/p&gt;

&lt;p&gt;åºŸè¯ğŸ‘†&lt;/p&gt;

&lt;p&gt;ä¸‹é¢çœ‹&lt;code&gt;å æœ‰å’Œè¯·æ±‚çš„èµ„æºæ•°é‡éƒ½æ˜¯æ— å…³ç´§è¦çš„ğŸŒ°&lt;/code&gt;&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;For example, the first coroutine starts a transaction and updated a row, then the second coroutine tries to update the same row before the first coroutine closes the transaction. The second coroutine will block the whole thread at the non-async update, waiting for the row lock to be released, but the releasing is in the first coroutine which is blocked by the second coroutine. Thus it will block forever.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;ä¹‹å‰åœ¨åç¨‹ä¸­ï¼Œæ¯æ—¶æ¯åˆ»å®é™…éƒ½åªæœ‰ä¸€ä»¶äº‹åœ¨æ‰§è¡Œï¼Œå‘ç”Ÿæ­»é”çš„æ¦‚ç‡åº”è¯¥ä¸é«˜å§ã€‚too youngå•Š&lt;/p&gt;

&lt;p&gt;æ¯”å¦‚ç¬¬ä¸€ä¸ªåç¨‹å‘èµ·äº‹åŠ¡æ›´æ–°æ•°æ®åº“ä¸­çš„ä¸€è¡Œï¼Œè¿™æ—¶å€™ç¬¬äºŒä¸ªåç¨‹è¯•å›¾æ›´æ–°åŒä¸€è¡Œï¼Œå¦‚æœç¬¬äºŒä¸ªåç¨‹æ˜¯éå¼‚æ­¥çš„æ›´æ–°ï¼Œé‚£ä¹ˆå®ƒå°±è¦ç­‰å¾…ç¬¬ä¸€ä¸ªåç¨‹é‡Šæ”¾èµ„æºï¼Œä½†æ˜¯è¿™æ—¶å€™æ•´ä¸ªçº¿ç¨‹å·²ç»è¢«ç¬¬äºŒä¸ªçº¿ç¨‹é˜»å¡äº†ï¼Œç¬¬ä¸€ä¸ªåç¨‹æ— æ³•é‡Šæ”¾èµ„æºï¼Œdeadlock!&lt;/p&gt;

&lt;p&gt;å›å¿†ä¸€ä¸‹ä¹¦æœ¬ä¸­å…³äºèµ„æºæ­»é”çš„å››ä¸ªæ¡ä»¶ï¼Œå›å¿†ä¸€ä¸‹:&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;äº’æ–¥æ¡ä»¶&lt;/li&gt;
&lt;li&gt;å æœ‰å’Œç­‰å¾…æ¡ä»¶&lt;/li&gt;
&lt;li&gt;ä¸å¯æŠ¢å æ¡ä»¶&lt;/li&gt;
&lt;li&gt;ç¯è·¯ç­‰å¾…æ¡ä»¶&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;è¿™å››ä¸ªæ¡ä»¶åªè¦æœ‰ä¸€ä¸ªä¸æˆç«‹é‚£ä¹ˆèµ„æºæ­»é”å°±ä¸ä¼šå‘ç”Ÿã€‚&lt;/p&gt;

&lt;p&gt;å¥½äº†ç°åœ¨å¥—ç”¨ä¸€ä¸‹ä¸Šé¢è¿™ä¸ªä¾‹å­ã€‚&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;æ•°æ®åº“è¡Œé”å’Œå½“å‰çº¿ç¨‹æ‰§è¡Œéƒ½æ˜¯äº’æ–¥çš„ï¼Œâœ…&lt;/li&gt;
&lt;li&gt;ç¬¬ä¸€ä¸ªåç¨‹å æœ‰äº†æ•°æ®åº“ä¸­çš„é”ç­‰å¾…çº¿ç¨‹æ‰§è¡Œæƒï¼Œç¬¬äºŒä¸ªåç¨‹å æœ‰äº†å½“å‰åç¨‹çš„æ‰§è¡Œç­‰å¾…è¡Œé”ï¼Œâœ…&lt;/li&gt;
&lt;li&gt;ä¸å¯æŠ¢å ï¼Œâœ…&lt;/li&gt;
&lt;li&gt;ç¯è·¯ç­‰å¾…ï¼Œç¬¬äºŒä¸ªçº¿ç¨‹ç­‰å¾…è¡Œé”ï¼Œç¬¬ä¸€ä¸ªçº¿ç¨‹ç­‰å¾…æœ‰æœºä¼šè¢«æ‰§è¡Œï¼Œâœ…&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;æ­»é”bingo!&lt;/p&gt;

&lt;p&gt;æ€ä¹ˆè§£å†³å‘¢ï¼Ÿ&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;A simple fix would be to defer the database operations into threads, so that they won&amp;rsquo;t block the main thread, thus won&amp;rsquo;t cause a dead lock easily. It usually works and there is even a library to do so. However when it comes to ORM, things become dirty.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;æŠŠæ•°æ®åº“ç›¸å…³æ“ä½œæ‰”ç»™å…¶ä»–çº¿ç¨‹å»æ‰§è¡Œï¼Œç¡®ä¿ä¸ä¼šé˜»å¡ä¸»çº¿ç¨‹å°±è¡Œäº†ã€‚&lt;/p&gt;

&lt;p&gt;ä½†æ˜¯çœŸçš„å°±è¡Œäº†å—ï¼Ÿ&lt;/p&gt;

&lt;p&gt;åœ¨ä¸€ä¸ªå¤æ‚çš„é¡¹ç›®ä¸­ï¼Œä½ æ°¸è¿œä¸çŸ¥é“å“ªä¸€è¡Œä»£ç ä¼šè°ƒç”¨åŒæ­¥ä»£ç é˜»å¡ä¸»çº¿ç¨‹ï¼Œ&lt;code&gt;Racing condition just happens under pressure, and anything that may block will eventually block&lt;/code&gt;, å¯èƒ½ä¼šå‘ç”Ÿçš„äº‹æƒ…ç»ˆå°†è¦å‘ç”Ÿã€‚&lt;/p&gt;

&lt;p&gt;æ‰€ä»¥ä½œè€…å»ºè®®:&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;This is usually the time when I suggest to separate the server into two parts: &amp;ldquo;normal blocking with ORM&amp;rdquo; and &amp;ldquo;asynchronous without ORM&amp;rdquo;.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;ä¸è¿‡å€’æ˜¯æƒ³èµ·å¦å¤–ä¸€ä¸ªé—®é¢˜äº†, ç°åœ¨å…¬å¸ä¸šåŠ¡éƒ½æ˜¯ç”¨çš„&lt;code&gt;gunicorn&lt;/code&gt;+&lt;code&gt;gevent&lt;/code&gt;, è¿™ä¸ªå†…éƒ¨æ˜¯æ€ä¹ˆè§£å†³è¿™ä¸ªé—®é¢˜çš„å‘¢&lt;/p&gt;

&lt;p&gt;å¯ä»¥çŒœæµ‹ä¸€ä¸‹ï¼š&lt;/p&gt;

&lt;p&gt;ä¸Šé¢çš„ä¾‹å­é€ æˆæ­»é”æ˜¯å› ä¸ºæœ‰åç¨‹è°ƒç”¨åŒæ­¥æ“ä½œ, è€Œgeventæ˜¯é€šè¿‡&lt;code&gt;monkey_path&lt;/code&gt;çš„æ“ä½œä»åº•å±‚æ”¹å˜æ‰€æœ‰è¯·æ±‚çš„è¡Œä¸ºï¼Œå°±æ²¡æœ‰è¿™ä¸ªé—®é¢˜äº†ã€‚&lt;/p&gt;

&lt;p&gt;ä¸è¿‡è¿˜æœ‰å…¶ä»–é—®é¢˜ã€‚&lt;/p&gt;

&lt;p&gt;&lt;code&gt;monkey_patch&lt;/code&gt;é’ˆå¯¹Pythonä»£ç æœ‰æ•ˆï¼Œå¦‚æœæ•°æ®åº“è¿æ¥å™¨ç”¨çš„æ˜¯cæ‰©å±•ï¼Œemmm&amp;hellip;å¯ä»¥å¤§èƒ†çš„çŒœæµ‹ä¸€ä¸‹å¯èƒ½çš„bug&lt;/p&gt;

&lt;p&gt;å‚è€ƒèµ„æ–™ï¼š&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;ç°ä»£æ“ä½œç³»ç»Ÿ&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://python-gino.readthedocs.io/zh/latest/why.html#the-story&#34;&gt;https://python-gino.readthedocs.io/zh/latest/why.html#the-story&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;</description>
    </item>
    
    <item>
      <title>2018å°ç»“</title>
      <link>https://fucangyu.github.io/post/summary-2018/</link>
      <pubDate>Mon, 31 Dec 2018 20:47:08 +0800</pubDate>
      
      <guid>https://fucangyu.github.io/post/summary-2018/</guid>
      <description>2018è¿‡å®Œäº†ï¼Œé©¬ä¸Šå°±å°±è¦27äº†ã€‚ 27äº†ï¼ï¼ï¼ 2018æ˜¯äººç”Ÿä¸­ç¬¬ä¸€ä¸ªä»å§‹è‡³ç»ˆéƒ½åœ¨ä¸Šç­çš„å¹´ä»½ï¼Œæœ€å¤§çš„æ„Ÿå—å°±æ˜¯ï¼Œæ—¶é—´è¿‡çš„å¥½å¿«å•Šï¼ ä¸€ã€èº«ä½“ï¼š æ˜æ˜¾çš„</description>
    </item>
    
    <item>
      <title>æ€ä¹ˆç†è§£å¼‚æ­¥(2)</title>
      <link>https://fucangyu.github.io/post/how-to-study-async2/</link>
      <pubDate>Sun, 30 Dec 2018 09:23:43 +0800</pubDate>
      
      <guid>https://fucangyu.github.io/post/how-to-study-async2/</guid>
      <description>å…ˆå›é¡¾ä¸€ä¸‹ä¸Šä¸€ç¯‡æ–‡ç« æ€ä¹ˆç†è§£å¼‚æ­¥(1) å¯¹å¼‚æ­¥ç¼–ç¨‹æ¥è¯´ï¼Œéœ€è¦ä»£ç æ®µåœ¨æŠŠæ§åˆ¶æƒç§»äº¤ç»™loopæ—¶å€™ï¼Œä¿å­˜å½“å‰continuation, ä»¥ä¾¿äºäº‹ä»¶å‘</description>
    </item>
    
    <item>
      <title>æ€ä¹ˆç†è§£å¼‚æ­¥?(1)</title>
      <link>https://fucangyu.github.io/post/how-to-study-async/</link>
      <pubDate>Sat, 29 Dec 2018 20:52:03 +0800</pubDate>
      
      <guid>https://fucangyu.github.io/post/how-to-study-async/</guid>
      <description>é›¶ ä»åˆšå¼€å§‹å­¦Pythonåˆ°ç°åœ¨ï¼Œä¸€ç›´å¯¹å¼‚æ­¥éƒ½åªæœ‰ä¸€ä¸ªå¾ˆæ¨¡ç³Šçš„å°è±¡ã€‚ ä»€ä¹ˆæ˜¯event_loopï¼Œeventå’Œloopæ˜¯åˆ°åº•ä»€ä¹ˆå…³ç³»ï¼Ÿ å…·ä½“çš„ä¸šåŠ¡</description>
    </item>
    
    <item>
      <title>æ€ä¹ˆç†è§£CPS?(1)</title>
      <link>https://fucangyu.github.io/post/cps1/</link>
      <pubDate>Sun, 11 Nov 2018 02:19:24 +0800</pubDate>
      
      <guid>https://fucangyu.github.io/post/cps1/</guid>
      <description>è¿™æ®µæ—¶é—´å­¦racketç»ˆäºé‡åˆ°äº†ä¼ è¯´ä¸­çš„CPS, ä¸å‡ºæ„å¤–æœç„¶å¾ˆéš¾ç†è§£ã€‚å…ˆæ¥çœ‹ä¸€ä¸‹ç»´åŸºç™¾ç§‘ä¸­å¯¹CPSçš„å®šä¹‰: In functional programming, continuation-passing style (CPS) is a style of programming in which control is passed explicitly</description>
    </item>
    
    <item>
      <title>Django ormæ”¹å­—æ®µåé€ æˆæ•°æ®ä¸¢å¤±</title>
      <link>https://fucangyu.github.io/post/django-orm-change-field-name/</link>
      <pubDate>Sat, 10 Nov 2018 21:34:22 +0800</pubDate>
      
      <guid>https://fucangyu.github.io/post/django-orm-change-field-name/</guid>
      <description>&lt;h3 id=&#34;ä¸€-ç°åœº&#34;&gt;ä¸€. ç°åœºï¼š&lt;/h3&gt;

&lt;p&gt;ä»¥ä¸ºæ˜¯ä¿®æ”¹ä¸€ä¸ªå˜é‡åï¼Œä½†åœ¨django ormå†…éƒ¨å¹¶ä¸è¿™ä¹ˆè®¤ä¸ºï¼š&lt;/p&gt;

&lt;p&gt;model:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span class=&#34;err&#34;&gt;æ—§åˆ—åï¼š&lt;/span&gt;
&lt;span class=&#34;n&#34;&gt;cos_path&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;models&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;CharField&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;max_length&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;200&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;null&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;True&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;verbose_name&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;å­˜å‚¨è·¯å¾„&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;

&lt;span class=&#34;err&#34;&gt;æ–°åˆ—å&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
&lt;span class=&#34;n&#34;&gt;storage_path&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;models&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;CharField&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;max_length&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;200&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;null&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;True&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;verbose_name&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;å­˜å‚¨è·¯å¾„&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;migrations:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span class=&#34;n&#34;&gt;operations&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;migrations&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;RemoveField&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;model_name&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;insurancedocument&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;cos_path&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;),&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;migrations&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;AddField&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;model_name&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;insurancedocument&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;storage_path&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
       &lt;span class=&#34;n&#34;&gt;field&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;models&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;CharField&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;max_length&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;200&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;null&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;True&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;verbose_name&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;å­˜å‚¨è·¯å¾„&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;),&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;),&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;sql:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sql&#34; data-lang=&#34;sql&#34;&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sql&#34; data-lang=&#34;sql&#34;&gt;&lt;span class=&#34;k&#34;&gt;BEGIN&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;span class=&#34;c1&#34;&gt;--
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;-- Remove field cos_path from insurancedocument
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;--
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;ALTER&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;TABLE&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;`&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;apis_insurancedocument&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;`&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;DROP&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;COLUMN&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;`&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;cos_path&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;`&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;span class=&#34;c1&#34;&gt;--
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;-- Add field storage_path to insurancedocument
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;--
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;ALTER&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;TABLE&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;`&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;apis_insurancedocument&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;`&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;ADD&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;COLUMN&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;`&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;storage_path&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;`&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;varchar&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;200&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;NULL&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;span class=&#34;k&#34;&gt;COMMIT&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;æ‰€ä»¥åœ¨Django ormé‡Œé¢è®¤ä¸ºè¿™æ˜¯åˆ å»äº†ä¸€ä¸ªå­—æ®µï¼Œç„¶ååˆæ–°å¢äº†ä¸€ä¸ªå­—æ®µï¼Œç„¶åæ•°æ®å°±ä¸¢äº†ã€‚&lt;/p&gt;

&lt;h3 id=&#34;äºŒ-å…¶ä»–djangoæ”¹åˆ—åæ‰‹æ®µ&#34;&gt;äºŒ. å…¶ä»–djangoæ”¹åˆ—åæ‰‹æ®µ&lt;/h3&gt;

&lt;h4 id=&#34;1-åˆ©ç”¨db-column-æ”¹å&#34;&gt;1. åˆ©ç”¨db_column æ”¹å&lt;/h4&gt;

&lt;p&gt;æ“ä½œå¦‚ä¸‹ï¼Œåˆ©ç”¨db_columnæ¥æ”¹å˜å­—æ®µåçš„ï¼Œç„¶åï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span class=&#34;n&#34;&gt;cos_path&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;models&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;CharField&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;max_length&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;200&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;null&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;True&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;verbose_name&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;å­˜å‚¨è·¯å¾„&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;

&lt;span class=&#34;n&#34;&gt;storage_path&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;models&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;CharField&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;max_length&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;200&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;null&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;True&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;db_column&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;cos_path&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;verbose_name&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;å­˜å‚¨è·¯å¾„&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sql&#34; data-lang=&#34;sql&#34;&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sql&#34; data-lang=&#34;sql&#34;&gt;&lt;span class=&#34;k&#34;&gt;BEGIN&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;span class=&#34;c1&#34;&gt;--
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;-- Remove field cos_path from insurancedocument
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;--
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;ALTER&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;TABLE&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;`&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;apis_insurancedocument&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;`&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;DROP&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;COLUMN&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;`&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;cos_path&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;`&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;span class=&#34;c1&#34;&gt;--
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;-- Add field storage_path to insurancedocument
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;--
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;ALTER&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;TABLE&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;`&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;apis_insurancedocument&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;`&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;ADD&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;COLUMN&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;`&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;cos_path&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;`&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;varchar&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;200&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;NULL&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;span class=&#34;k&#34;&gt;COMMIT&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;django ormä¼šå…ˆæŠŠcos_pathé‚£ä¸ªå­—æ®µç»™dropæ‰ï¼Œæ•°æ®è¿˜ä¼šä¸¢å¤±ã€‚&lt;/p&gt;

&lt;h4 id=&#34;2-åˆ©ç”¨rename-fieldæ”¹å&#34;&gt;2. åˆ©ç”¨rename fieldæ”¹å&lt;/h4&gt;

&lt;p&gt;(1) åˆ©ç”¨python manage.py makemigrations &amp;ndash;empty apisåˆ›å»ºä¸€ä¸ªæ–°çš„migrationsæ–‡ä»¶, ç¼–è¾‘ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;19
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;20
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;21
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;22
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;23
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;24
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span class=&#34;kn&#34;&gt;from&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;django.db&lt;/span&gt; &lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;migrations&lt;/span&gt;
&lt;span class=&#34;kn&#34;&gt;from&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;django.db&lt;/span&gt; &lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;models&lt;/span&gt;


&lt;span class=&#34;k&#34;&gt;class&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;Migration&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;migrations&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Migration&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;

    &lt;span class=&#34;n&#34;&gt;dependencies&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;
        &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;apis&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;0006_auto_20180724_1039&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;),&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;

    &lt;span class=&#34;n&#34;&gt;operations&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;migrations&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;AlterField&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;
            &lt;span class=&#34;n&#34;&gt;model_name&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;insurancedocument&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
            &lt;span class=&#34;n&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;cos_path&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
            &lt;span class=&#34;n&#34;&gt;field&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;models&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;CharField&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;
                &lt;span class=&#34;n&#34;&gt;max_length&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;200&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;null&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;True&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;verbose_name&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;å­˜å‚¨è·¯å¾„&amp;#39;&lt;/span&gt;
            &lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
        &lt;span class=&#34;p&#34;&gt;),&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;migrations&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;RenameField&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;
            &lt;span class=&#34;n&#34;&gt;model_name&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;insurancedocument&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
            &lt;span class=&#34;n&#34;&gt;old_name&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;cos_path&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
            &lt;span class=&#34;n&#34;&gt;new_name&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;storage_path&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
        &lt;span class=&#34;p&#34;&gt;),&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;(2)æ‰§è¡Œçš„sqlè¯­å¥ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sql&#34; data-lang=&#34;sql&#34;&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;9
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sql&#34; data-lang=&#34;sql&#34;&gt;&lt;span class=&#34;k&#34;&gt;BEGIN&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;span class=&#34;c1&#34;&gt;--
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;-- Alter field cos_path on insurancedocument
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;--
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;--
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;-- Rename field cos_path on insurancedocument to storage_path
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;--
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;ALTER&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;TABLE&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;`&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;apis_insurancedocument&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;`&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;CHANGE&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;`&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;cos_path&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;`&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;`&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;storage_path&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;`&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;varchar&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;200&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;NULL&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;span class=&#34;k&#34;&gt;COMMIT&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;è¿™æ—¶å€™djangoæ‰è®¤ä¸ºæ‰§è¡Œçš„æ˜¯æ”¹åæ“ä½œï¼Œ æŸ¥çœ‹migrateä¹‹åçš„æ•°æ®åº“å‘ç°æ•°æ®æ²¡æœ‰ä¸¢å¤±ã€‚&lt;/p&gt;

&lt;p&gt;ä½†æ˜¯è¿™ç§æ“ä½œå¯¹mysqlæ¥è¯´è²Œä¼¼éƒ½æ˜¯é‡å»ºä¸€å¼ æ–°è¡¨ï¼Œç„¶åæŠŠæ—§è¡¨å†…å®¹æ’å…¥æ–°è¡¨é‡Œé¢ï¼Œè€—æ—¶é•¿, éœ€è¦åœæœ è€Œä¸”å±é™©ï¼Œ æ‰€ä»¥è¡¥å……æ¯…æ€»è¯´çš„ä¸€ç§æ–¹æ³•ï¼š&lt;/p&gt;

&lt;h4 id=&#34;3-ä¸åœæœæ”¹å&#34;&gt;3 ä¸åœæœæ”¹å&lt;/h4&gt;

&lt;ol&gt;
&lt;li&gt;å…ˆåŠ åˆ—ï¼Œæ”¹ä»£ç æ¥è¯»è€åˆ—&amp;amp;&amp;amp;åŒå†™ï¼Œ&lt;/li&gt;
&lt;li&gt;é€šè¿‡ sql æˆ–è€…ä»£ç å¤åˆ¶åŸåˆ—æ•°æ®åˆ°æ–°åˆ—ï¼Œ&lt;/li&gt;
&lt;li&gt;ä»£ç å†åˆ‡æ¢æˆè¯»å†™æ–°åˆ—ï¼Œ&lt;/li&gt;
&lt;li&gt;å†åšæ¸…ç†è€åˆ—çš„äº‹æƒ…&lt;/li&gt;
&lt;/ol&gt;

&lt;h4 id=&#34;4-è¿˜æ˜¯ä¸è¦æ”¹åå­—äº†&#34;&gt;4 è¿˜æ˜¯ä¸è¦æ”¹åå­—äº†&lt;/h4&gt;

&lt;h2 id=&#34;åæ€&#34;&gt;åæ€:&lt;/h2&gt;

&lt;hr /&gt;

&lt;ol&gt;
&lt;li&gt;åœ¨çº¿ä¸Šæ‰§è¡Œè¿™ç§éœ€è¦Schema Operationsçš„äº‹æƒ…ï¼Œç¡®è®¤æ˜¯å¦å¿…è¦&lt;/li&gt;
&lt;li&gt;è¿˜æ˜¯ä¸è¦ç”¨django migrationäº†&lt;/li&gt;
&lt;li&gt;æ‰§è¡Œsqlmigrateï¼Œ ç¡®è®¤django ormåˆ°åº•ä¼šå¹²ä»€ä¹ˆäº‹æƒ…&lt;/li&gt;
&lt;li&gt;æœ¬åœ°å®éªŒï¼Œè¯æ˜æ“ä½œæ— å®³&lt;/li&gt;
&lt;/ol&gt;</description>
    </item>
    
    <item>
      <title>About Me</title>
      <link>https://fucangyu.github.io/post/about/</link>
      <pubDate>Sat, 10 Nov 2018 20:59:00 +0800</pubDate>
      
      <guid>https://fucangyu.github.io/post/about/</guid>
      <description>&lt;ul&gt;
&lt;li&gt;åœ¨åŒ—äº¬&lt;/li&gt;
&lt;li&gt;å·¥ä½œä¸­ä¸»è¦ä½¿ç”¨Python&lt;/li&gt;
&lt;li&gt;è„šæœ¬å·¥ç¨‹å¸ˆï¼Œåå…«çº¿ç¨‹åºå‘˜&lt;/li&gt;
&lt;li&gt;åœ¨å­¦&lt;del&gt;racket&lt;/del&gt;scalaï¼Œè¶Šæ¥è¶Šå–œæ¬¢è¿™é—¨è¯­è¨€&lt;/li&gt;
&lt;li&gt;&lt;del&gt;æ­£åœ¨continuationå’Œmacroçš„å‘é‡Œé¢&lt;/del&gt;&lt;/li&gt;
&lt;li&gt;å¯¹k8så’Œdockerææœ‰å…´è¶£&lt;/li&gt;
&lt;li&gt;è¶Šæ¥è¶Šèƒ–äº†&lt;/li&gt;
&lt;/ul&gt;</description>
    </item>
    
  </channel>
</rss>